{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from 'react';\nimport qs from 'qs';\n\nfunction createResponseContext(initialState) {\n  return /*#__PURE__*/createContext(initialState);\n}\n\nfunction isNotEmpty(obj) {\n  return obj !== undefined && obj !== null && obj !== '';\n} // Example: page=1&items_per_page=10&sort=id&order=desc&search=a&filter_name=a&filter_online=false\n\n\nfunction stringifyRequestQuery(state) {\n  const pagination = qs.stringify(state, {\n    filter: ['page', 'items_per_page'],\n    skipNulls: true\n  });\n  const sort = qs.stringify(state, {\n    filter: ['sort', 'order'],\n    skipNulls: true\n  });\n  const search = isNotEmpty(state.search) ? qs.stringify(state, {\n    filter: ['search'],\n    skipNulls: true\n  }) : '';\n  const filter = state.filter ? Object.entries(state.filter).filter(obj => isNotEmpty(obj[1])).map(obj => {\n    return `filter_${obj[0]}=${obj[1]}`;\n  }).join('&') : '';\n  return [pagination, sort, search, filter].filter(f => f).join('&').toLowerCase();\n}\n\nfunction parseRequestQuery(query) {\n  const cache = qs.parse(query);\n  return cache;\n}\n\nfunction calculatedGroupingIsDisabled(isLoading, data) {\n  if (isLoading) {\n    return true;\n  }\n\n  return !data || !data.length;\n}\n\nfunction calculateIsAllDataSelected(data, selected) {\n  if (!data) {\n    return false;\n  }\n\n  return data.length > 0 && data.length === selected.length;\n}\n\nfunction groupingOnSelect(id, selected, setSelected) {\n  if (!id) {\n    return;\n  }\n\n  if (selected.includes(id)) {\n    setSelected(selected.filter(itemId => itemId !== id));\n  } else {\n    const updatedSelected = [...selected];\n    updatedSelected.push(id);\n    setSelected(updatedSelected);\n  }\n}\n\nfunction groupingOnSelectAll(isAllSelected, setSelected, data) {\n  if (isAllSelected) {\n    setSelected([]);\n    return;\n  }\n\n  if (!data || !data.length) {\n    return;\n  }\n\n  setSelected(data.filter(item => item.id).map(item => item.id));\n} // Hook\n\n\nfunction useDebounce(value, delay) {\n  _s();\n\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay); // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\n\nexport { createResponseContext, stringifyRequestQuery, parseRequestQuery, calculatedGroupingIsDisabled, calculateIsAllDataSelected, groupingOnSelect, groupingOnSelectAll, useDebounce, isNotEmpty };","map":{"version":3,"names":["createContext","useEffect","useState","qs","createResponseContext","initialState","isNotEmpty","obj","undefined","stringifyRequestQuery","state","pagination","stringify","filter","skipNulls","sort","search","Object","entries","map","join","f","toLowerCase","parseRequestQuery","query","cache","parse","calculatedGroupingIsDisabled","isLoading","data","length","calculateIsAllDataSelected","selected","groupingOnSelect","id","setSelected","includes","itemId","updatedSelected","push","groupingOnSelectAll","isAllSelected","item","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout"],"sources":["D:/FHDC/CCHND-V2/src/_metronic/helpers/crud-helper/helpers.tsx"],"sourcesContent":["import {createContext, Dispatch, SetStateAction, useEffect, useState} from 'react'\r\nimport qs from 'qs'\r\nimport {ID, QueryResponseContextProps, QueryState} from './models'\r\n\r\nfunction createResponseContext<T>(initialState: QueryResponseContextProps<T>) {\r\n  return createContext(initialState)\r\n}\r\n\r\nfunction isNotEmpty(obj: unknown) {\r\n  return obj !== undefined && obj !== null && obj !== ''\r\n}\r\n\r\n// Example: page=1&items_per_page=10&sort=id&order=desc&search=a&filter_name=a&filter_online=false\r\nfunction stringifyRequestQuery(state: QueryState): string {\r\n  const pagination = qs.stringify(state, {filter: ['page', 'items_per_page'], skipNulls: true})\r\n  const sort = qs.stringify(state, {filter: ['sort', 'order'], skipNulls: true})\r\n  const search = isNotEmpty(state.search)\r\n    ? qs.stringify(state, {filter: ['search'], skipNulls: true})\r\n    : ''\r\n\r\n  const filter = state.filter\r\n    ? Object.entries(state.filter as Object)\r\n        .filter((obj) => isNotEmpty(obj[1]))\r\n        .map((obj) => {\r\n          return `filter_${obj[0]}=${obj[1]}`\r\n        })\r\n        .join('&')\r\n    : ''\r\n\r\n  return [pagination, sort, search, filter]\r\n    .filter((f) => f)\r\n    .join('&')\r\n    .toLowerCase()\r\n}\r\n\r\nfunction parseRequestQuery(query: string): QueryState {\r\n  const cache: unknown = qs.parse(query)\r\n  return cache as QueryState\r\n}\r\n\r\nfunction calculatedGroupingIsDisabled<T>(isLoading: boolean, data: Array<T> | undefined): boolean {\r\n  if (isLoading) {\r\n    return true\r\n  }\r\n\r\n  return !data || !data.length\r\n}\r\n\r\nfunction calculateIsAllDataSelected<T>(data: Array<T> | undefined, selected: Array<ID>): boolean {\r\n  if (!data) {\r\n    return false\r\n  }\r\n\r\n  return data.length > 0 && data.length === selected.length\r\n}\r\n\r\nfunction groupingOnSelect(\r\n  id: ID,\r\n  selected: Array<ID>,\r\n  setSelected: Dispatch<SetStateAction<Array<ID>>>\r\n) {\r\n  if (!id) {\r\n    return\r\n  }\r\n\r\n  if (selected.includes(id)) {\r\n    setSelected(selected.filter((itemId) => itemId !== id))\r\n  } else {\r\n    const updatedSelected = [...selected]\r\n    updatedSelected.push(id)\r\n    setSelected(updatedSelected)\r\n  }\r\n}\r\n\r\nfunction groupingOnSelectAll<T>(\r\n  isAllSelected: boolean,\r\n  setSelected: Dispatch<SetStateAction<Array<ID>>>,\r\n  data?: Array<T & {id?: ID}>\r\n) {\r\n  if (isAllSelected) {\r\n    setSelected([])\r\n    return\r\n  }\r\n\r\n  if (!data || !data.length) {\r\n    return\r\n  }\r\n\r\n  setSelected(data.filter((item) => item.id).map((item) => item.id))\r\n}\r\n\r\n// Hook\r\nfunction useDebounce(value: string | undefined, delay: number) {\r\n  // State and setters for debounced value\r\n  const [debouncedValue, setDebouncedValue] = useState(value)\r\n  useEffect(\r\n    () => {\r\n      // Update debounced value after delay\r\n      const handler = setTimeout(() => {\r\n        setDebouncedValue(value)\r\n      }, delay)\r\n      // Cancel the timeout if value changes (also on delay change or unmount)\r\n      // This is how we prevent debounced value from updating if value is changed ...\r\n      // .. within the delay period. Timeout gets cleared and restarted.\r\n      return () => {\r\n        clearTimeout(handler)\r\n      }\r\n    },\r\n    [value, delay] // Only re-call effect if value or delay changes\r\n  )\r\n  return debouncedValue\r\n}\r\n\r\nexport {\r\n  createResponseContext,\r\n  stringifyRequestQuery,\r\n  parseRequestQuery,\r\n  calculatedGroupingIsDisabled,\r\n  calculateIsAllDataSelected,\r\n  groupingOnSelect,\r\n  groupingOnSelectAll,\r\n  useDebounce,\r\n  isNotEmpty,\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}