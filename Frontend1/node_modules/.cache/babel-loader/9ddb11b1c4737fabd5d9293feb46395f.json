{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar core = require('@react-pdf-viewer/core');\n\nvar React = require('react');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar CoverInner = function (_a) {\n  var getPageIndex = _a.getPageIndex,\n      renderSpinner = _a.renderSpinner,\n      doc = _a.doc;\n\n  var _b = React__namespace.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  var isMounted = core.useIsMounted();\n  var renderTask = React__namespace.useRef();\n\n  var handleVisibilityChanged = function (params) {\n    if (src || !params.isVisible) {\n      return;\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var numPages = doc.numPages;\n    var targetPage = getPageIndex ? getPageIndex({\n      numPages: numPages\n    }) : 0;\n    var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n    core.getPage(doc, normalizePage).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var canvas = document.createElement('canvas');\n      var canvasContext = canvas.getContext('2d', {\n        alpha: false\n      });\n      var containerWidth = containerEle.clientWidth;\n      var containerHeight = containerEle.clientHeight;\n      var scaled = Math.min(containerWidth / w, containerHeight / h);\n      var canvasWidth = scaled * w;\n      var canvasHeight = scaled * h;\n      canvas.height = canvasHeight;\n      canvas.width = canvasWidth;\n      canvas.style.opacity = '0';\n      var renderViewport = page.getViewport({\n        rotation: 0,\n        scale: scaled\n      });\n      renderTask.current = page.render({\n        canvasContext: canvasContext,\n        viewport: renderViewport\n      });\n      renderTask.current.promise.then(function () {\n        isMounted.current && setSrc(canvas.toDataURL());\n        canvas.width = 0;\n        canvas.height = 0;\n      }, function () {});\n    });\n  };\n\n  var containerRef = core.useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  React__namespace.useEffect(function () {\n    return function () {\n      var _a;\n\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, []);\n  return src ? React__namespace.createElement(\"img\", {\n    className: \"rpv-thumbnail__cover-image\",\n    \"data-testid\": \"thumbnail__cover-image\",\n    src: src\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover-loader\",\n    \"data-testid\": \"thumbnail__cover-loader\",\n    ref: containerRef\n  }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null));\n};\n\nvar Cover = function (_a) {\n  var getPageIndex = _a.getPageIndex,\n      renderSpinner = _a.renderSpinner,\n      store = _a.store;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover\"\n  }, currentDoc ? React__namespace.createElement(CoverInner, {\n    doc: currentDoc,\n    getPageIndex: getPageIndex,\n    renderSpinner: renderSpinner\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover-loader\"\n  }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)));\n};\n\nvar defaultSpinner = function () {\n  return React__namespace.createElement(core.Spinner, null);\n};\n\nvar SpinnerContext = React__namespace.createContext({\n  renderSpinner: defaultSpinner\n});\n\nvar FetchLabels = function (_a) {\n  var children = _a.children,\n      doc = _a.doc;\n  var isMounted = core.useIsMounted();\n\n  var _b = React__namespace.useState({\n    loading: true,\n    labels: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getPageLabels().then(function (result) {\n      isMounted.current && setStatus({\n        loading: false,\n        labels: result || []\n      });\n    });\n  }, [doc.loadingTask.docId]);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : children(status.labels);\n};\n\nvar scrollToBeVisible = function (ele, container) {\n  var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n  var eleHeight = ele.clientHeight;\n  var containerHeight = container.clientHeight;\n\n  if (top < 0) {\n    container.scrollTop += top;\n    return;\n  }\n\n  if (top + eleHeight <= containerHeight) {\n    return;\n  }\n\n  container.scrollTop += top + eleHeight - containerHeight;\n};\n\nvar ThumbnailItem = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      thumbnailHeight = _a.thumbnailHeight,\n      thumbnailWidth = _a.thumbnailWidth,\n      onRenderCompleted = _a.onRenderCompleted;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  var thumbnailLabel = l10n && l10n.thumbnail ? l10n.thumbnail.thumbnailLabel : 'Thumbnail of page {{pageIndex}}';\n  React__namespace.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var canvasContext = canvas.getContext('2d', {\n      alpha: false\n    });\n    var w = thumbnailWidth;\n    var h = w / (pageWidth / pageHeight);\n    var scale = w / pageWidth;\n    canvas.height = h;\n    canvas.width = w;\n    canvas.style.height = \"\".concat(h, \"px\");\n    canvas.style.width = \"\".concat(w, \"px\");\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      setSrc(canvas.toDataURL());\n      onRenderCompleted(pageIndex);\n    }, function () {\n      onRenderCompleted(pageIndex);\n    });\n    return function () {\n      var _a;\n\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, [rotation]);\n  return !src ? React__namespace.useContext(SpinnerContext).renderSpinner() : React__namespace.createElement(\"img\", {\n    \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\".concat(pageIndex + 1)),\n    src: src,\n    height: \"\".concat(thumbnailHeight, \"px\"),\n    width: \"\".concat(thumbnailWidth, \"px\")\n  });\n};\n\nvar ThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageRotation = _a.pageRotation,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      shouldRender = _a.shouldRender,\n      thumbnailWidth = _a.thumbnailWidth,\n      onRenderCompleted = _a.onRenderCompleted,\n      onVisibilityChanged = _a.onVisibilityChanged;\n  var isMounted = core.useIsMounted();\n\n  var _b = React__namespace.useState({\n    height: pageHeight,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var scale = width / height;\n  var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n  var w = isVertical ? thumbnailWidth : thumbnailWidth / scale;\n  var h = isVertical ? thumbnailWidth / scale : thumbnailWidth;\n  React__namespace.useEffect(function () {\n    if (shouldRender) {\n      core.getPage(doc, pageIndex).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        isMounted.current && setPageSize({\n          height: viewport.height,\n          page: pdfPage,\n          viewportRotation: viewport.rotation,\n          width: viewport.width\n        });\n      });\n    }\n  }, [shouldRender]);\n  var rotationNumber = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n  var containerRef = core.useIntersectionObserver({\n    onVisibilityChanged: function (visibility) {\n      onVisibilityChanged(pageIndex, visibility);\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__container\",\n    \"data-testid\": \"thumbnail__container-\".concat(pageIndex),\n    ref: containerRef,\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.useContext(SpinnerContext).renderSpinner() : React__namespace.createElement(ThumbnailItem, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageIndex: pageIndex,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    thumbnailHeight: h,\n    thumbnailWidth: w,\n    onRenderCompleted: onRenderCompleted\n  }));\n};\n\nvar ThumbnailList = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      labels = _a.labels,\n      pagesRotation = _a.pagesRotation,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      renderCurrentPageLabel = _a.renderCurrentPageLabel,\n      renderThumbnailItem = _a.renderThumbnailItem,\n      rotatedPage = _a.rotatedPage,\n      rotation = _a.rotation,\n      thumbnailWidth = _a.thumbnailWidth,\n      onJumpToPage = _a.onJumpToPage,\n      onRotatePage = _a.onRotatePage;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var containerRef = React__namespace.useRef(null);\n  var thumbnailsRef = React__namespace.useRef([]);\n\n  var _b = React__namespace.useState(currentPage),\n      currentFocused = _b[0],\n      setCurrentFocused = _b[1];\n\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n\n  var _c = React__namespace.useState(-1),\n      renderPageIndex = _c[0],\n      setRenderPageIndex = _c[1];\n\n  var isMounted = core.useIsMounted();\n  var hasRenderingThumbnailRef = React__namespace.useRef(false);\n  var renderQueue = core.useRenderQueue({\n    doc: doc\n  });\n  var pageIndexes = React__namespace.useMemo(function () {\n    return Array(numPages).fill(0).map(function (_, pageIndex) {\n      return pageIndex;\n    });\n  }, [docId]);\n\n  var handleKeyDown = function (e) {\n    switch (e.key) {\n      case 'ArrowDown':\n        activateNextItem();\n        break;\n\n      case 'ArrowUp':\n        activatePreviousItem();\n        break;\n\n      case 'Enter':\n        jumpToFocusedPage();\n        break;\n    }\n  };\n\n  var activateNextItem = function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = thumbnailsRef.current;\n    var nextItem = currentFocused + 1;\n\n    if (nextItem < items.length) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n\n      setCurrentFocused(nextItem);\n    }\n  };\n\n  var activatePreviousItem = function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = thumbnailsRef.current;\n    var prevItem = currentFocused - 1;\n\n    if (prevItem >= 0) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n\n      setCurrentFocused(prevItem);\n    }\n  };\n\n  var jumpToFocusedPage = function () {\n    if (currentFocused >= 0 && currentFocused < numPages) {\n      onJumpToPage(currentFocused);\n    }\n  };\n\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n  }, []);\n  React__namespace.useEffect(function () {\n    var thumbnails = thumbnailsRef.current;\n\n    if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n      return;\n    }\n\n    var thumbnailEle = thumbnails[currentFocused];\n    thumbnailEle.setAttribute('tabindex', '0');\n    thumbnailEle.focus();\n  }, [currentFocused]);\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (container) {\n      var thumbnailNodes = container.children;\n\n      if (currentPage < thumbnailNodes.length) {\n        scrollToBeVisible(thumbnailNodes.item(currentPage), container);\n      }\n    }\n  }, [currentPage]);\n  var handleRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n    if (isMounted.current) {\n      renderQueue.markRendered(pageIndex);\n      hasRenderingThumbnailRef.current = false;\n      renderNextThumbnail();\n    }\n  }, [docId]);\n  var handleVisibilityChanged = React__namespace.useCallback(function (pageIndex, visibility) {\n    visibility.isVisible ? renderQueue.setVisibility(pageIndex, visibility.ratio) : renderQueue.setOutOfRange(pageIndex);\n    renderNextThumbnail();\n  }, [docId]);\n  var renderNextThumbnail = React__namespace.useCallback(function () {\n    if (hasRenderingThumbnailRef.current) {\n      return;\n    }\n\n    var nextPage = renderQueue.getHighestPriorityPage();\n\n    if (nextPage > -1) {\n      renderQueue.markRendering(nextPage);\n      hasRenderingThumbnailRef.current = true;\n      setRenderPageIndex(nextPage);\n    }\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    if (rotatedPage >= 0) {\n      renderQueue.markRendering(rotatedPage);\n      hasRenderingThumbnailRef.current = true;\n      setRenderPageIndex(rotatedPage);\n    }\n  }, [docId, rotatedPage]);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"data-testid\": \"thumbnail__list\",\n    className: core.classNames({\n      'rpv-thumbnail__list': true,\n      'rpv-thumbnail__list--rtl': isRtl\n    }),\n    onKeyDown: handleKeyDown\n  }, pageIndexes.map(function (pageIndex) {\n    var key = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n    var pageLabel = labels.length === numPages ? labels[pageIndex] : \"\".concat(pageIndex + 1);\n    var label = renderCurrentPageLabel ? renderCurrentPageLabel({\n      currentPage: currentPage,\n      pageIndex: pageIndex,\n      numPages: numPages,\n      pageLabel: pageLabel\n    }) : pageLabel;\n    var pageRotation = pagesRotation.has(pageIndex) ? pagesRotation.get(pageIndex) : 0;\n    var thumbnail = React__namespace.createElement(ThumbnailContainer, {\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: pageIndex,\n      pageRotation: pageRotation,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      shouldRender: renderPageIndex === pageIndex,\n      thumbnailWidth: thumbnailWidth,\n      onRenderCompleted: handleRenderCompleted,\n      onVisibilityChanged: handleVisibilityChanged\n    });\n    return renderThumbnailItem ? renderThumbnailItem({\n      currentPage: currentPage,\n      key: key,\n      numPages: numPages,\n      pageIndex: pageIndex,\n      renderPageLabel: React__namespace.createElement(React__namespace.Fragment, null, label),\n      renderPageThumbnail: thumbnail,\n      onJumpToPage: function () {\n        return onJumpToPage(pageIndex);\n      },\n      onRotatePage: function (direction) {\n        return onRotatePage(pageIndex, direction);\n      }\n    }) : React__namespace.createElement(\"div\", {\n      key: key\n    }, React__namespace.createElement(\"div\", {\n      className: core.classNames({\n        'rpv-thumbnail__item': true,\n        'rpv-thumbnail__item--selected': currentPage === pageIndex\n      }),\n      role: \"button\",\n      tabIndex: currentPage === pageIndex ? 0 : -1,\n      onClick: function () {\n        return onJumpToPage(pageIndex);\n      }\n    }, thumbnail), React__namespace.createElement(\"div\", {\n      \"data-testid\": \"thumbnail__label-\".concat(pageIndex),\n      className: \"rpv-thumbnail__label\"\n    }, label));\n  }));\n};\n\nvar ThumbnailListWithStore = function (_a) {\n  var renderCurrentPageLabel = _a.renderCurrentPageLabel,\n      renderThumbnailItem = _a.renderThumbnailItem,\n      store = _a.store,\n      thumbnailWidth = _a.thumbnailWidth;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var _c = React__namespace.useState(store.get('currentPage') || 0),\n      currentPage = _c[0],\n      setCurrentPage = _c[1];\n\n  var _d = React__namespace.useState(store.get('pageHeight') || 0),\n      pageHeight = _d[0],\n      setPageHeight = _d[1];\n\n  var _e = React__namespace.useState(store.get('pageWidth') || 0),\n      pageWidth = _e[0],\n      setPageWidth = _e[1];\n\n  var _f = React__namespace.useState(store.get('rotation') || 0),\n      rotation = _f[0],\n      setRotation = _f[1];\n\n  var _g = React__namespace.useState(store.get('pagesRotation') || new Map()),\n      pagesRotation = _g[0],\n      setPagesRotation = _g[1];\n\n  var _h = React__namespace.useState(store.get('rotatedPage') || -1),\n      rotatedPage = _h[0],\n      setRotatedPage = _h[1];\n\n  var handleCurrentPageChanged = function (currentPageIndex) {\n    setCurrentPage(currentPageIndex);\n  };\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  var handlePageHeightChanged = function (height) {\n    setPageHeight(height);\n  };\n\n  var handlePageWidthChanged = function (width) {\n    setPageWidth(width);\n  };\n\n  var handleRotationChanged = function (currentRotation) {\n    setRotation(currentRotation);\n  };\n\n  var handlePagesRotationChanged = function (rotations) {\n    setPagesRotation(rotations);\n  };\n\n  var handleRotatedPage = function (rotatedPage) {\n    setRotatedPage(rotatedPage);\n  };\n\n  var jump = function (pageIndex) {\n    var jumpToPage = store.get('jumpToPage');\n\n    if (jumpToPage) {\n      jumpToPage(pageIndex);\n    }\n  };\n\n  var rotatePage = function (pageIndex, direction) {\n    store.get('rotatePage')(pageIndex, direction);\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    store.subscribe('pageHeight', handlePageHeightChanged);\n    store.subscribe('pageWidth', handlePageWidthChanged);\n    store.subscribe('rotatedPage', handleRotatedPage);\n    store.subscribe('rotation', handleRotationChanged);\n    store.subscribe('pagesRotation', handlePagesRotationChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n      store.unsubscribe('pageHeight', handlePageHeightChanged);\n      store.unsubscribe('pageWidth', handlePageWidthChanged);\n      store.unsubscribe('rotatedPage', handleRotatedPage);\n      store.unsubscribe('rotation', handleRotationChanged);\n      store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n    };\n  }, []);\n  core.useIsomorphicLayoutEffect(function () {\n    store.subscribe('currentPage', handleCurrentPageChanged);\n    return function () {\n      store.unsubscribe('currentPage', handleCurrentPageChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(core.LazyRender, {\n    testId: \"thumbnail__list-container\",\n    attrs: {\n      className: 'rpv-thumbnail__list-container'\n    }\n  }, React__namespace.createElement(FetchLabels, {\n    doc: currentDoc\n  }, function (labels) {\n    return React__namespace.createElement(ThumbnailList, {\n      currentPage: currentPage,\n      doc: currentDoc,\n      labels: labels,\n      pagesRotation: pagesRotation,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      renderCurrentPageLabel: renderCurrentPageLabel,\n      renderThumbnailItem: renderThumbnailItem,\n      rotatedPage: rotatedPage,\n      rotation: rotation,\n      thumbnailWidth: thumbnailWidth,\n      onJumpToPage: jump,\n      onRotatePage: rotatePage\n    });\n  })) : React__namespace.createElement(\"div\", {\n    \"data-testid\": \"thumbnail-list__loader\",\n    className: \"rpv-thumbnail__loader\"\n  }, React__namespace.useContext(SpinnerContext).renderSpinner());\n};\n\nvar thumbnailPlugin = function (pluginProps) {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      rotatePage: function () {}\n    });\n  }, []);\n\n  var _a = React__namespace.useState(''),\n      docId = _a[0],\n      setDocId = _a[1];\n\n  var CoverDecorator = function (props) {\n    return React__namespace.createElement(Cover, __assign({}, props, {\n      renderSpinner: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner,\n      store: store\n    }));\n  };\n\n  var ThumbnailsDecorator = React__namespace.useCallback(function (props) {\n    return React__namespace.createElement(SpinnerContext.Provider, {\n      value: {\n        renderSpinner: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner) || defaultSpinner\n      }\n    }, React__namespace.createElement(ThumbnailListWithStore, {\n      renderCurrentPageLabel: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderCurrentPageLabel,\n      renderThumbnailItem: props === null || props === void 0 ? void 0 : props.renderThumbnailItem,\n      store: store,\n      thumbnailWidth: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.thumbnailWidth) || 100\n    }));\n  }, [docId]);\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToPage', pluginFunctions.jumpToPage);\n      store.update('rotatePage', pluginFunctions.rotatePage);\n    },\n    onDocumentLoad: function (props) {\n      setDocId(props.doc.loadingTask.docId);\n      store.update('doc', props.doc);\n    },\n    onViewerStateChange: function (viewerState) {\n      store.update('currentPage', viewerState.pageIndex);\n      store.update('pagesRotation', viewerState.pagesRotation);\n      store.update('pageHeight', viewerState.pageHeight);\n      store.update('pageWidth', viewerState.pageWidth);\n      store.update('rotation', viewerState.rotation);\n      store.update('rotatedPage', viewerState.rotatedPage);\n      return viewerState;\n    },\n    Cover: CoverDecorator,\n    Thumbnails: ThumbnailsDecorator\n  };\n};\n\nexports.thumbnailPlugin = thumbnailPlugin;","map":{"version":3,"names":["Object","defineProperty","exports","value","core","require","React","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","CoverInner","_a","getPageIndex","renderSpinner","doc","_b","useState","src","setSrc","isMounted","useIsMounted","renderTask","useRef","handleVisibilityChanged","params","isVisible","containerEle","containerRef","current","numPages","targetPage","normalizePage","Math","max","min","getPage","then","page","viewport","getViewport","scale","w","width","h","height","canvas","document","createElement","canvasContext","getContext","alpha","containerWidth","clientWidth","containerHeight","clientHeight","scaled","canvasWidth","canvasHeight","style","opacity","renderViewport","rotation","render","promise","toDataURL","useIntersectionObserver","onVisibilityChanged","useEffect","cancel","className","ref","Spinner","Cover","store","currentDoc","setCurrentDoc","handleDocumentChanged","subscribe","unsubscribe","defaultSpinner","SpinnerContext","createContext","FetchLabels","children","loading","labels","status","setStatus","getPageLabels","result","loadingTask","docId","Fragment","scrollToBeVisible","ele","container","top","getBoundingClientRect","eleHeight","scrollTop","ThumbnailItem","pageHeight","pageIndex","pageWidth","thumbnailHeight","thumbnailWidth","onRenderCompleted","l10n","useContext","LocalizationContext","thumbnailLabel","thumbnail","task","concat","replace","ThumbnailContainer","pageRotation","shouldRender","viewportRotation","pageSize","setPageSize","isVertical","abs","pdfPage","rotationNumber","visibility","ThumbnailList","currentPage","pagesRotation","renderCurrentPageLabel","renderThumbnailItem","rotatedPage","onJumpToPage","onRotatePage","thumbnailsRef","currentFocused","setCurrentFocused","direction","ThemeContext","isRtl","TextDirection","RightToLeft","_c","renderPageIndex","setRenderPageIndex","hasRenderingThumbnailRef","renderQueue","useRenderQueue","pageIndexes","useMemo","Array","fill","map","_","handleKeyDown","key","activateNextItem","activatePreviousItem","jumpToFocusedPage","items","nextItem","setAttribute","prevItem","useIsomorphicLayoutEffect","from","querySelectorAll","thumbnails","thumbnailEle","focus","thumbnailNodes","item","handleRenderCompleted","useCallback","markRendered","renderNextThumbnail","setVisibility","ratio","setOutOfRange","nextPage","getHighestPriorityPage","markRendering","classNames","onKeyDown","pageLabel","label","has","renderPageLabel","renderPageThumbnail","role","tabIndex","onClick","ThumbnailListWithStore","setCurrentPage","_d","setPageHeight","_e","setPageWidth","_f","setRotation","_g","Map","setPagesRotation","_h","setRotatedPage","handleCurrentPageChanged","currentPageIndex","handlePageHeightChanged","handlePageWidthChanged","handleRotationChanged","currentRotation","handlePagesRotationChanged","rotations","handleRotatedPage","jump","jumpToPage","rotatePage","LazyRender","testId","attrs","thumbnailPlugin","pluginProps","createStore","setDocId","CoverDecorator","props","ThumbnailsDecorator","Provider","install","pluginFunctions","update","onDocumentLoad","onViewerStateChange","viewerState","Thumbnails"],"sources":["V:/Projects/FDHC TSD/CCHND - React/Frontend/node_modules/@react-pdf-viewer/thumbnail/lib/cjs/thumbnail.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar CoverInner = function (_a) {\n    var getPageIndex = _a.getPageIndex, renderSpinner = _a.renderSpinner, doc = _a.doc;\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    var isMounted = core.useIsMounted();\n    var renderTask = React__namespace.useRef();\n    var handleVisibilityChanged = function (params) {\n        if (src || !params.isVisible) {\n            return;\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var numPages = doc.numPages;\n        var targetPage = getPageIndex ? getPageIndex({ numPages: numPages }) : 0;\n        var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n        core.getPage(doc, normalizePage).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var canvas = document.createElement('canvas');\n            var canvasContext = canvas.getContext('2d', { alpha: false });\n            var containerWidth = containerEle.clientWidth;\n            var containerHeight = containerEle.clientHeight;\n            var scaled = Math.min(containerWidth / w, containerHeight / h);\n            var canvasWidth = scaled * w;\n            var canvasHeight = scaled * h;\n            canvas.height = canvasHeight;\n            canvas.width = canvasWidth;\n            canvas.style.opacity = '0';\n            var renderViewport = page.getViewport({\n                rotation: 0,\n                scale: scaled,\n            });\n            renderTask.current = page.render({ canvasContext: canvasContext, viewport: renderViewport });\n            renderTask.current.promise.then(function () {\n                isMounted.current && setSrc(canvas.toDataURL());\n                canvas.width = 0;\n                canvas.height = 0;\n            }, function () {\n            });\n        });\n    };\n    var containerRef = core.useIntersectionObserver({\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    React__namespace.useEffect(function () {\n        return function () {\n            var _a;\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, []);\n    return src ? (React__namespace.createElement(\"img\", { className: \"rpv-thumbnail__cover-image\", \"data-testid\": \"thumbnail__cover-image\", src: src })) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover-loader\", \"data-testid\": \"thumbnail__cover-loader\", ref: containerRef }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)));\n};\n\nvar Cover = function (_a) {\n    var getPageIndex = _a.getPageIndex, renderSpinner = _a.renderSpinner, store = _a.store;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover\" }, currentDoc ? (React__namespace.createElement(CoverInner, { doc: currentDoc, getPageIndex: getPageIndex, renderSpinner: renderSpinner })) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover-loader\" }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)))));\n};\n\nvar defaultSpinner = function () { return React__namespace.createElement(core.Spinner, null); };\nvar SpinnerContext = React__namespace.createContext({\n    renderSpinner: defaultSpinner,\n});\n\nvar FetchLabels = function (_a) {\n    var children = _a.children, doc = _a.doc;\n    var isMounted = core.useIsMounted();\n    var _b = React__namespace.useState({\n        loading: true,\n        labels: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getPageLabels().then(function (result) {\n            isMounted.current && setStatus({ loading: false, labels: result || [] });\n        });\n    }, [doc.loadingTask.docId]);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : children(status.labels);\n};\n\nvar scrollToBeVisible = function (ele, container) {\n    var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n    var eleHeight = ele.clientHeight;\n    var containerHeight = container.clientHeight;\n    if (top < 0) {\n        container.scrollTop += top;\n        return;\n    }\n    if (top + eleHeight <= containerHeight) {\n        return;\n    }\n    container.scrollTop += top + eleHeight - containerHeight;\n};\n\nvar ThumbnailItem = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, thumbnailHeight = _a.thumbnailHeight, thumbnailWidth = _a.thumbnailWidth, onRenderCompleted = _a.onRenderCompleted;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    var thumbnailLabel = l10n && l10n.thumbnail\n        ? l10n.thumbnail.thumbnailLabel\n        : 'Thumbnail of page {{pageIndex}}';\n    React__namespace.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var canvasContext = canvas.getContext('2d', { alpha: false });\n        var w = thumbnailWidth;\n        var h = w / (pageWidth / pageHeight);\n        var scale = w / pageWidth;\n        canvas.height = h;\n        canvas.width = w;\n        canvas.style.height = \"\".concat(h, \"px\");\n        canvas.style.width = \"\".concat(w, \"px\");\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            setSrc(canvas.toDataURL());\n            onRenderCompleted(pageIndex);\n        }, function () {\n            onRenderCompleted(pageIndex);\n        });\n        return function () {\n            var _a;\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, [rotation]);\n    return !src ? (React__namespace.useContext(SpinnerContext).renderSpinner()) : (React__namespace.createElement(\"img\", { \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\".concat(pageIndex + 1)), src: src, height: \"\".concat(thumbnailHeight, \"px\"), width: \"\".concat(thumbnailWidth, \"px\") }));\n};\n\nvar ThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageRotation = _a.pageRotation, pageWidth = _a.pageWidth, rotation = _a.rotation, shouldRender = _a.shouldRender, thumbnailWidth = _a.thumbnailWidth, onRenderCompleted = _a.onRenderCompleted, onVisibilityChanged = _a.onVisibilityChanged;\n    var isMounted = core.useIsMounted();\n    var _b = React__namespace.useState({\n        height: pageHeight,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var scale = width / height;\n    var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n    var w = isVertical ? thumbnailWidth : thumbnailWidth / scale;\n    var h = isVertical ? thumbnailWidth / scale : thumbnailWidth;\n    React__namespace.useEffect(function () {\n        if (shouldRender) {\n            core.getPage(doc, pageIndex).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                isMounted.current &&\n                    setPageSize({\n                        height: viewport.height,\n                        page: pdfPage,\n                        viewportRotation: viewport.rotation,\n                        width: viewport.width,\n                    });\n            });\n        }\n    }, [shouldRender]);\n    var rotationNumber = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n    var containerRef = core.useIntersectionObserver({\n        onVisibilityChanged: function (visibility) {\n            onVisibilityChanged(pageIndex, visibility);\n        },\n    });\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__container\", \"data-testid\": \"thumbnail__container-\".concat(pageIndex), ref: containerRef, style: {\n            height: \"\".concat(h, \"px\"),\n            width: \"\".concat(w, \"px\"),\n        } }, !page ? (React__namespace.useContext(SpinnerContext).renderSpinner()) : (React__namespace.createElement(ThumbnailItem, { page: page, pageHeight: isVertical ? height : width, pageIndex: pageIndex, pageWidth: isVertical ? width : height, rotation: rotationNumber, thumbnailHeight: h, thumbnailWidth: w, onRenderCompleted: onRenderCompleted }))));\n};\n\nvar ThumbnailList = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, labels = _a.labels, pagesRotation = _a.pagesRotation, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, renderCurrentPageLabel = _a.renderCurrentPageLabel, renderThumbnailItem = _a.renderThumbnailItem, rotatedPage = _a.rotatedPage, rotation = _a.rotation, thumbnailWidth = _a.thumbnailWidth, onJumpToPage = _a.onJumpToPage, onRotatePage = _a.onRotatePage;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var containerRef = React__namespace.useRef(null);\n    var thumbnailsRef = React__namespace.useRef([]);\n    var _b = React__namespace.useState(currentPage), currentFocused = _b[0], setCurrentFocused = _b[1];\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var _c = React__namespace.useState(-1), renderPageIndex = _c[0], setRenderPageIndex = _c[1];\n    var isMounted = core.useIsMounted();\n    var hasRenderingThumbnailRef = React__namespace.useRef(false);\n    var renderQueue = core.useRenderQueue({ doc: doc });\n    var pageIndexes = React__namespace.useMemo(function () {\n        return Array(numPages)\n            .fill(0)\n            .map(function (_, pageIndex) { return pageIndex; });\n    }, [docId]);\n    var handleKeyDown = function (e) {\n        switch (e.key) {\n            case 'ArrowDown':\n                activateNextItem();\n                break;\n            case 'ArrowUp':\n                activatePreviousItem();\n                break;\n            case 'Enter':\n                jumpToFocusedPage();\n                break;\n        }\n    };\n    var activateNextItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var nextItem = currentFocused + 1;\n        if (nextItem < items.length) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(nextItem);\n        }\n    };\n    var activatePreviousItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var prevItem = currentFocused - 1;\n        if (prevItem >= 0) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(prevItem);\n        }\n    };\n    var jumpToFocusedPage = function () {\n        if (currentFocused >= 0 && currentFocused < numPages) {\n            onJumpToPage(currentFocused);\n        }\n    };\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n    }, []);\n    React__namespace.useEffect(function () {\n        var thumbnails = thumbnailsRef.current;\n        if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n            return;\n        }\n        var thumbnailEle = thumbnails[currentFocused];\n        thumbnailEle.setAttribute('tabindex', '0');\n        thumbnailEle.focus();\n    }, [currentFocused]);\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (container) {\n            var thumbnailNodes = container.children;\n            if (currentPage < thumbnailNodes.length) {\n                scrollToBeVisible(thumbnailNodes.item(currentPage), container);\n            }\n        }\n    }, [currentPage]);\n    var handleRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n        if (isMounted.current) {\n            renderQueue.markRendered(pageIndex);\n            hasRenderingThumbnailRef.current = false;\n            renderNextThumbnail();\n        }\n    }, [docId]);\n    var handleVisibilityChanged = React__namespace.useCallback(function (pageIndex, visibility) {\n        visibility.isVisible\n            ? renderQueue.setVisibility(pageIndex, visibility.ratio)\n            :\n                renderQueue.setOutOfRange(pageIndex);\n        renderNextThumbnail();\n    }, [docId]);\n    var renderNextThumbnail = React__namespace.useCallback(function () {\n        if (hasRenderingThumbnailRef.current) {\n            return;\n        }\n        var nextPage = renderQueue.getHighestPriorityPage();\n        if (nextPage > -1) {\n            renderQueue.markRendering(nextPage);\n            hasRenderingThumbnailRef.current = true;\n            setRenderPageIndex(nextPage);\n        }\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        if (rotatedPage >= 0) {\n            renderQueue.markRendering(rotatedPage);\n            hasRenderingThumbnailRef.current = true;\n            setRenderPageIndex(rotatedPage);\n        }\n    }, [docId, rotatedPage]);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"data-testid\": \"thumbnail__list\", className: core.classNames({\n            'rpv-thumbnail__list': true,\n            'rpv-thumbnail__list--rtl': isRtl,\n        }), onKeyDown: handleKeyDown }, pageIndexes.map(function (pageIndex) {\n        var key = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n        var pageLabel = labels.length === numPages ? labels[pageIndex] : \"\".concat(pageIndex + 1);\n        var label = renderCurrentPageLabel\n            ? renderCurrentPageLabel({ currentPage: currentPage, pageIndex: pageIndex, numPages: numPages, pageLabel: pageLabel })\n            : pageLabel;\n        var pageRotation = pagesRotation.has(pageIndex) ? pagesRotation.get(pageIndex) : 0;\n        var thumbnail = (React__namespace.createElement(ThumbnailContainer, { doc: doc, pageHeight: pageHeight, pageIndex: pageIndex, pageRotation: pageRotation, pageWidth: pageWidth, rotation: rotation, shouldRender: renderPageIndex === pageIndex, thumbnailWidth: thumbnailWidth, onRenderCompleted: handleRenderCompleted, onVisibilityChanged: handleVisibilityChanged }));\n        return renderThumbnailItem ? (renderThumbnailItem({\n            currentPage: currentPage,\n            key: key,\n            numPages: numPages,\n            pageIndex: pageIndex,\n            renderPageLabel: React__namespace.createElement(React__namespace.Fragment, null, label),\n            renderPageThumbnail: thumbnail,\n            onJumpToPage: function () { return onJumpToPage(pageIndex); },\n            onRotatePage: function (direction) { return onRotatePage(pageIndex, direction); },\n        })) : (React__namespace.createElement(\"div\", { key: key },\n            React__namespace.createElement(\"div\", { className: core.classNames({\n                    'rpv-thumbnail__item': true,\n                    'rpv-thumbnail__item--selected': currentPage === pageIndex,\n                }), role: \"button\", tabIndex: currentPage === pageIndex ? 0 : -1, onClick: function () { return onJumpToPage(pageIndex); } }, thumbnail),\n            React__namespace.createElement(\"div\", { \"data-testid\": \"thumbnail__label-\".concat(pageIndex), className: \"rpv-thumbnail__label\" }, label)));\n    })));\n};\n\nvar ThumbnailListWithStore = function (_a) {\n    var renderCurrentPageLabel = _a.renderCurrentPageLabel, renderThumbnailItem = _a.renderThumbnailItem, store = _a.store, thumbnailWidth = _a.thumbnailWidth;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var _c = React__namespace.useState(store.get('currentPage') || 0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React__namespace.useState(store.get('pageHeight') || 0), pageHeight = _d[0], setPageHeight = _d[1];\n    var _e = React__namespace.useState(store.get('pageWidth') || 0), pageWidth = _e[0], setPageWidth = _e[1];\n    var _f = React__namespace.useState(store.get('rotation') || 0), rotation = _f[0], setRotation = _f[1];\n    var _g = React__namespace.useState(store.get('pagesRotation') || new Map()), pagesRotation = _g[0], setPagesRotation = _g[1];\n    var _h = React__namespace.useState(store.get('rotatedPage') || -1), rotatedPage = _h[0], setRotatedPage = _h[1];\n    var handleCurrentPageChanged = function (currentPageIndex) {\n        setCurrentPage(currentPageIndex);\n    };\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    var handlePageHeightChanged = function (height) {\n        setPageHeight(height);\n    };\n    var handlePageWidthChanged = function (width) {\n        setPageWidth(width);\n    };\n    var handleRotationChanged = function (currentRotation) {\n        setRotation(currentRotation);\n    };\n    var handlePagesRotationChanged = function (rotations) {\n        setPagesRotation(rotations);\n    };\n    var handleRotatedPage = function (rotatedPage) {\n        setRotatedPage(rotatedPage);\n    };\n    var jump = function (pageIndex) {\n        var jumpToPage = store.get('jumpToPage');\n        if (jumpToPage) {\n            jumpToPage(pageIndex);\n        }\n    };\n    var rotatePage = function (pageIndex, direction) {\n        store.get('rotatePage')(pageIndex, direction);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        store.subscribe('pageHeight', handlePageHeightChanged);\n        store.subscribe('pageWidth', handlePageWidthChanged);\n        store.subscribe('rotatedPage', handleRotatedPage);\n        store.subscribe('rotation', handleRotationChanged);\n        store.subscribe('pagesRotation', handlePagesRotationChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n            store.unsubscribe('pageHeight', handlePageHeightChanged);\n            store.unsubscribe('pageWidth', handlePageWidthChanged);\n            store.unsubscribe('rotatedPage', handleRotatedPage);\n            store.unsubscribe('rotation', handleRotationChanged);\n            store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n        };\n    }, []);\n    core.useIsomorphicLayoutEffect(function () {\n        store.subscribe('currentPage', handleCurrentPageChanged);\n        return function () {\n            store.unsubscribe('currentPage', handleCurrentPageChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(core.LazyRender, { testId: \"thumbnail__list-container\", attrs: {\n            className: 'rpv-thumbnail__list-container',\n        } },\n        React__namespace.createElement(FetchLabels, { doc: currentDoc }, function (labels) { return (React__namespace.createElement(ThumbnailList, { currentPage: currentPage, doc: currentDoc, labels: labels, pagesRotation: pagesRotation, pageHeight: pageHeight, pageWidth: pageWidth, renderCurrentPageLabel: renderCurrentPageLabel, renderThumbnailItem: renderThumbnailItem, rotatedPage: rotatedPage, rotation: rotation, thumbnailWidth: thumbnailWidth, onJumpToPage: jump, onRotatePage: rotatePage })); }))) : (React__namespace.createElement(\"div\", { \"data-testid\": \"thumbnail-list__loader\", className: \"rpv-thumbnail__loader\" }, React__namespace.useContext(SpinnerContext).renderSpinner()));\n};\n\nvar thumbnailPlugin = function (pluginProps) {\n    var store = React__namespace.useMemo(function () {\n        return core.createStore({\n            rotatePage: function () {\n            },\n        });\n    }, []);\n    var _a = React__namespace.useState(''), docId = _a[0], setDocId = _a[1];\n    var CoverDecorator = function (props) { return (React__namespace.createElement(Cover, __assign({}, props, { renderSpinner: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner, store: store }))); };\n    var ThumbnailsDecorator = React__namespace.useCallback(function (props) { return (React__namespace.createElement(SpinnerContext.Provider, { value: { renderSpinner: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner) || defaultSpinner } },\n        React__namespace.createElement(ThumbnailListWithStore, { renderCurrentPageLabel: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderCurrentPageLabel, renderThumbnailItem: props === null || props === void 0 ? void 0 : props.renderThumbnailItem, store: store, thumbnailWidth: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.thumbnailWidth) || 100 }))); }, [docId]);\n    return {\n        install: function (pluginFunctions) {\n            store.update('jumpToPage', pluginFunctions.jumpToPage);\n            store.update('rotatePage', pluginFunctions.rotatePage);\n        },\n        onDocumentLoad: function (props) {\n            setDocId(props.doc.loadingTask.docId);\n            store.update('doc', props.doc);\n        },\n        onViewerStateChange: function (viewerState) {\n            store.update('currentPage', viewerState.pageIndex);\n            store.update('pagesRotation', viewerState.pagesRotation);\n            store.update('pageHeight', viewerState.pageHeight);\n            store.update('pageWidth', viewerState.pageWidth);\n            store.update('rotation', viewerState.rotation);\n            store.update('rotatedPage', viewerState.rotatedPage);\n            return viewerState;\n        },\n        Cover: CoverDecorator,\n        Thumbnails: ThumbnailsDecorator,\n    };\n};\n\nexports.thumbnailPlugin = thumbnailPlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}