{"ast":null,"code":"var _jsxFileName = \"D:\\\\FHDC\\\\CCHND-V2\\\\Frontend\\\\src\\\\firebaseNotifications\\\\Notification.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectCurrentUser } from \"../app/redux-module/auth/authSlice\";\nimport { notiActions } from \"../app/redux-module/noti/notiSlice\";\nimport { fetchToken, onMessageListener } from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Notification = () => {\n  _s();\n\n  const [notification, setNotification] = useState({\n    title: \"\",\n    body: \"\"\n  });\n  const currentUser = useSelector(selectCurrentUser);\n  const dispatch = useDispatch();\n\n  const notify = () => toast( /*#__PURE__*/_jsxDEV(ToastDisplay, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 30\n  }, this));\n\n  function ToastDisplay() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: notification === null || notification === void 0 ? void 0 : notification.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: notification === null || notification === void 0 ? void 0 : notification.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this);\n  }\n\n  useEffect(() => {\n    if (notification !== null && notification !== void 0 && notification.title) {\n      notify();\n    }\n  }, [notification]); // fetchToken();\n\n  onMessageListener().then(payload => {\n    var _payload$notification, _payload$notification2;\n\n    setNotification({\n      title: payload === null || payload === void 0 ? void 0 : (_payload$notification = payload.notification) === null || _payload$notification === void 0 ? void 0 : _payload$notification.title,\n      body: payload === null || payload === void 0 ? void 0 : (_payload$notification2 = payload.notification) === null || _payload$notification2 === void 0 ? void 0 : _payload$notification2.body\n    });\n\n    if (currentUser) {\n      dispatch(notiActions.getNoti(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n    }\n  }).catch(err => console.log(\"failed: \", err));\n  return /*#__PURE__*/_jsxDEV(Toaster, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Notification, \"WJJkks26Lhic47/xp5broP2dx8c=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Notification;\nexport default Notification;\n\nvar _c;\n\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"names":["React","useState","useEffect","toast","Toaster","useDispatch","useSelector","selectCurrentUser","notiActions","fetchToken","onMessageListener","Notification","notification","setNotification","title","body","currentUser","dispatch","notify","ToastDisplay","then","payload","getNoti","id","catch","err","console","log"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/firebaseNotifications/Notification.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectCurrentUser } from \"../app/redux-module/auth/authSlice\";\nimport { notiActions } from \"../app/redux-module/noti/notiSlice\";\nimport { fetchToken, onMessageListener } from \"./firebase\";\n\nconst Notification = () => {\n  const [notification, setNotification] = useState({ title: \"\", body: \"\" });\n  const currentUser = useSelector(selectCurrentUser);\n  const dispatch = useDispatch();\n\n  const notify = () => toast(<ToastDisplay />);\n  function ToastDisplay() {\n    return (\n      <div>\n        <p>\n          <b>{notification?.title}</b>\n        </p>\n        <p>{notification?.body}</p>\n      </div>\n    );\n  }\n\n  useEffect(() => {\n    if (notification?.title) {\n      notify();\n    }\n  }, [notification]);\n\n  // fetchToken();\n\n  onMessageListener()\n    .then((payload) => {\n      setNotification({\n        title: payload?.notification?.title,\n        body: payload?.notification?.body,\n      });\n      if (currentUser) {\n        dispatch(notiActions.getNoti(currentUser?.id));\n      }\n    })\n    .catch((err) => console.log(\"failed: \", err));\n\n  return <Toaster />;\n};\n\nexport default Notification;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,IAAgBC,OAAhB,QAA+B,iBAA/B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,iBAAT,QAAkC,oCAAlC;AACA,SAASC,WAAT,QAA4B,oCAA5B;AACA,SAASC,UAAT,EAAqBC,iBAArB,QAA8C,YAA9C;;;AAEA,MAAMC,YAAY,GAAG,MAAM;EAAA;;EACzB,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC;IAAEa,KAAK,EAAE,EAAT;IAAaC,IAAI,EAAE;EAAnB,CAAD,CAAhD;EACA,MAAMC,WAAW,GAAGV,WAAW,CAACC,iBAAD,CAA/B;EACA,MAAMU,QAAQ,GAAGZ,WAAW,EAA5B;;EAEA,MAAMa,MAAM,GAAG,MAAMf,KAAK,eAAC,QAAC,YAAD;IAAA;IAAA;IAAA;EAAA,QAAD,CAA1B;;EACA,SAASgB,YAAT,GAAwB;IACtB,oBACE;MAAA,wBACE;QAAA,uBACE;UAAA,UAAIP,YAAJ,aAAIA,YAAJ,uBAAIA,YAAY,CAAEE;QAAlB;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAIE;QAAA,UAAIF,YAAJ,aAAIA,YAAJ,uBAAIA,YAAY,CAAEG;MAAlB;QAAA;QAAA;QAAA;MAAA,QAJF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAQD;;EAEDb,SAAS,CAAC,MAAM;IACd,IAAIU,YAAJ,aAAIA,YAAJ,eAAIA,YAAY,CAAEE,KAAlB,EAAyB;MACvBI,MAAM;IACP;EACF,CAJQ,EAIN,CAACN,YAAD,CAJM,CAAT,CAjByB,CAuBzB;;EAEAF,iBAAiB,GACdU,IADH,CACSC,OAAD,IAAa;IAAA;;IACjBR,eAAe,CAAC;MACdC,KAAK,EAAEO,OAAF,aAAEA,OAAF,gDAAEA,OAAO,CAAET,YAAX,0DAAE,sBAAuBE,KADhB;MAEdC,IAAI,EAAEM,OAAF,aAAEA,OAAF,iDAAEA,OAAO,CAAET,YAAX,2DAAE,uBAAuBG;IAFf,CAAD,CAAf;;IAIA,IAAIC,WAAJ,EAAiB;MACfC,QAAQ,CAACT,WAAW,CAACc,OAAZ,CAAoBN,WAApB,aAAoBA,WAApB,uBAAoBA,WAAW,CAAEO,EAAjC,CAAD,CAAR;IACD;EACF,CATH,EAUGC,KAVH,CAUUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,GAAxB,CAVlB;EAYA,oBAAO,QAAC,OAAD;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAtCD;;GAAMd,Y;UAEgBL,W,EACHD,W;;;KAHbM,Y;AAwCN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}