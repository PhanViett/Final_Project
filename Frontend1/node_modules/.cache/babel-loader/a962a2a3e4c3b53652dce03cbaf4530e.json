{"ast":null,"code":"export default function SetupAxios(axios,store){axios.defaults.headers.Accept=\"application/json\";axios.interceptors.request.use(function(config){var _store$getState=store.getState(),access_token=_store$getState.auth.access_token;if(access_token){config.headers.Authorization=\"Bearer \".concat(access_token);}return config;},function(err){return Promise.reject(err);});axios.interceptors.response.use(function(response){return response;},function(error){// if (error.response.status == 401) {\n//   localStorage.clear();\n//   window.location.href = \"/connexion\";\n// }\n// reject with error if response status is not 403\nreturn Promise.reject(error);});}var responseHandler=function responseHandler(response){return response;};// const errorHandler = (error) => {\n//   console.log(\"error\", error.response);\n//   let { status } = error.response;\n//   switch (status) {\n//     case 400:\n//       const temp = errorCode?.find(\n//         (elem) => elem.key === error.response.data.errorCode\n//       );\n//       if (temp) {\n//         toast.error(temp.value, {\n//           position: \"top-right\",\n//           autoClose: 3000,\n//           hideProgressBar: false,\n//           closeOnClick: true,\n//           pauseOnHover: true,\n//           draggable: true,\n//           progress: undefined,\n//           toastId: \"error\",\n//         });\n//       }\n//       return Promise.reject(error);\n//     case 401:\n//       localStorage.removeItem(\"persist:root\");\n//       authHelper.removeAuth();\n//       toast.error(\"Token hết hạn!\", {\n//         position: \"top-right\",\n//         autoClose: 3000,\n//         hideProgressBar: false,\n//         closeOnClick: true,\n//         pauseOnHover: true,\n//         draggable: true,\n//         progress: undefined,\n//         toastId: \"error\",\n//       });\n//       window.location.reload();\n//       // navigate(0);\n//       return Promise.reject(error);\n//     case 500:\n//       localStorage.removeItem(\"persist:root\");\n//       authHelper.removeAuth();\n//       toast.error(\"Token hết hạn!\", {\n//         position: \"top-right\",\n//         autoClose: 3000,\n//         hideProgressBar: false,\n//         closeOnClick: true,\n//         pauseOnHover: true,\n//         draggable: true,\n//         progress: undefined,\n//         toastId: \"error\",\n//       });\n//       window.location.reload();\n//       // navigate(0);\n//       return Promise.reject(error);\n//     default:\n//       return Promise.reject(error);\n//   }\n// };","map":{"version":3,"names":["SetupAxios","axios","store","defaults","headers","Accept","interceptors","request","use","config","getState","access_token","auth","Authorization","err","Promise","reject","response","error","responseHandler"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/app/configs/SetupAxios.js"],"sourcesContent":["export default function SetupAxios(axios, store) {\r\n  axios.defaults.headers.Accept = \"application/json\";\r\n  axios.interceptors.request.use(\r\n    (config) => {\r\n      const {\r\n        auth: { access_token },\r\n      } = store.getState();\r\n      if (access_token) {\r\n        config.headers.Authorization = `Bearer ${access_token}`;\r\n      }\r\n      return config;\r\n    },\r\n    (err) => Promise.reject(err)\r\n  );\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n      // if (error.response.status == 401) {\r\n      //   localStorage.clear();\r\n      //   window.location.href = \"/connexion\";\r\n      // }\r\n      // reject with error if response status is not 403\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n}\r\n\r\nconst responseHandler = (response) => {\r\n  return response;\r\n};\r\n\r\n// const errorHandler = (error) => {\r\n//   console.log(\"error\", error.response);\r\n//   let { status } = error.response;\r\n//   switch (status) {\r\n//     case 400:\r\n//       const temp = errorCode?.find(\r\n//         (elem) => elem.key === error.response.data.errorCode\r\n//       );\r\n//       if (temp) {\r\n//         toast.error(temp.value, {\r\n//           position: \"top-right\",\r\n//           autoClose: 3000,\r\n//           hideProgressBar: false,\r\n//           closeOnClick: true,\r\n//           pauseOnHover: true,\r\n//           draggable: true,\r\n//           progress: undefined,\r\n//           toastId: \"error\",\r\n//         });\r\n//       }\r\n//       return Promise.reject(error);\r\n//     case 401:\r\n//       localStorage.removeItem(\"persist:root\");\r\n//       authHelper.removeAuth();\r\n//       toast.error(\"Token hết hạn!\", {\r\n//         position: \"top-right\",\r\n//         autoClose: 3000,\r\n//         hideProgressBar: false,\r\n//         closeOnClick: true,\r\n//         pauseOnHover: true,\r\n//         draggable: true,\r\n//         progress: undefined,\r\n//         toastId: \"error\",\r\n//       });\r\n//       window.location.reload();\r\n//       // navigate(0);\r\n//       return Promise.reject(error);\r\n//     case 500:\r\n//       localStorage.removeItem(\"persist:root\");\r\n//       authHelper.removeAuth();\r\n//       toast.error(\"Token hết hạn!\", {\r\n//         position: \"top-right\",\r\n//         autoClose: 3000,\r\n//         hideProgressBar: false,\r\n//         closeOnClick: true,\r\n//         pauseOnHover: true,\r\n//         draggable: true,\r\n//         progress: undefined,\r\n//         toastId: \"error\",\r\n//       });\r\n//       window.location.reload();\r\n//       // navigate(0);\r\n//       return Promise.reject(error);\r\n//     default:\r\n//       return Promise.reject(error);\r\n//   }\r\n// };\r\n"],"mappings":"AAAA,cAAe,SAASA,WAAT,CAAoBC,KAApB,CAA2BC,KAA3B,CAAkC,CAC/CD,KAAK,CAACE,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAAgC,kBAAhC,CACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,SAACC,MAAD,CAAY,CACV,oBAEIP,KAAK,CAACQ,QAAN,EAFJ,CACUC,YADV,iBACEC,IADF,CACUD,YADV,CAGA,GAAIA,YAAJ,CAAkB,CAChBF,MAAM,CAACL,OAAP,CAAeS,aAAf,kBAAyCF,YAAzC,EACD,CACD,MAAOF,OAAP,CACD,CATH,CAUE,SAACK,GAAD,QAASC,QAAO,CAACC,MAAR,CAAeF,GAAf,CAAT,EAVF,EAYAb,KAAK,CAACK,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CACE,SAACS,QAAD,QAAcA,SAAd,EADF,CAEE,SAACC,KAAD,CAAW,CACT;AACA;AACA;AACA;AACA;AACA,MAAOH,QAAO,CAACC,MAAR,CAAeE,KAAf,CAAP,CACD,CATH,EAWD,CAED,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACF,QAAD,CAAc,CACpC,MAAOA,SAAP,CACD,CAFD,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}