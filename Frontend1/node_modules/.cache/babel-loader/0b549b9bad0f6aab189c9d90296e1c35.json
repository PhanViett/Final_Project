{"ast":null,"code":"var AUTH_LOCAL_STORAGE_KEY=\"auth-data\";var getAuth=function getAuth(){if(!localStorage){return;}var lsValue=localStorage.getItem(AUTH_LOCAL_STORAGE_KEY);if(!lsValue){return;}try{var auth=JSON.parse(lsValue);if(auth){// You can easily check auth_token expiration also\nreturn auth;}}catch(error){console.error(\"AUTH LOCAL STORAGE PARSE ERROR\",error);}};var setAuth=function setAuth(auth){if(!localStorage){return;}try{var lsValue=JSON.stringify(auth);localStorage.setItem(AUTH_LOCAL_STORAGE_KEY,lsValue);}catch(error){console.error(\"AUTH LOCAL STORAGE SAVE ERROR\",error);}};var removeAuth=function removeAuth(){if(!localStorage){return;}try{localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY);}catch(error){console.error(\"AUTH LOCAL STORAGE REMOVE ERROR\",error);}};export function setupAxios(axios){axios.defaults.headers.Accept=\"application/json\";axios.interceptors.request.use(function(config){var auth=getAuth();if(auth&&auth.access_token){config.headers.Authorization=\"Bearer \".concat(auth.access_token);}return config;},function(err){return Promise.reject(err);});}export{getAuth,setAuth,removeAuth,AUTH_LOCAL_STORAGE_KEY};","map":{"version":3,"names":["AUTH_LOCAL_STORAGE_KEY","getAuth","localStorage","lsValue","getItem","auth","JSON","parse","error","console","setAuth","stringify","setItem","removeAuth","removeItem","setupAxios","axios","defaults","headers","Accept","interceptors","request","use","config","access_token","Authorization","err","Promise","reject"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/app/modules/apps/auth/core/AuthHelpers.ts"],"sourcesContent":["import { AuthModel } from \"./_models\";\r\n\r\nconst AUTH_LOCAL_STORAGE_KEY = \"auth-data\";\r\nconst getAuth = (): AuthModel | undefined => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  const lsValue: string | null = localStorage.getItem(AUTH_LOCAL_STORAGE_KEY);\r\n  if (!lsValue) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const auth: AuthModel = JSON.parse(lsValue) as AuthModel;\r\n    if (auth) {\r\n      // You can easily check auth_token expiration also\r\n      return auth;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE PARSE ERROR\", error);\r\n  }\r\n};\r\n\r\nconst setAuth = (auth: AuthModel) => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const lsValue = JSON.stringify(auth);\r\n    localStorage.setItem(AUTH_LOCAL_STORAGE_KEY, lsValue);\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE SAVE ERROR\", error);\r\n  }\r\n};\r\n\r\nconst removeAuth = () => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY);\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE REMOVE ERROR\", error);\r\n  }\r\n};\r\n\r\nexport function setupAxios(axios: any) {\r\n  axios.defaults.headers.Accept = \"application/json\";\r\n  axios.interceptors.request.use(\r\n    (config: { headers: { Authorization: string } }) => {\r\n      const auth = getAuth();\r\n      if (auth && auth.access_token) {\r\n        config.headers.Authorization = `Bearer ${auth.access_token}`;\r\n      }\r\n\r\n      return config;\r\n    },\r\n    (err: any) => Promise.reject(err)\r\n  );\r\n}\r\n\r\nexport { getAuth, setAuth, removeAuth, AUTH_LOCAL_STORAGE_KEY };\r\n"],"mappings":"AAEA,GAAMA,uBAAsB,CAAG,WAA/B,CACA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAA6B,CAC3C,GAAI,CAACC,YAAL,CAAmB,CACjB,OACD,CAED,GAAMC,QAAsB,CAAGD,YAAY,CAACE,OAAb,CAAqBJ,sBAArB,CAA/B,CACA,GAAI,CAACG,OAAL,CAAc,CACZ,OACD,CAED,GAAI,CACF,GAAME,KAAe,CAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAxB,CACA,GAAIE,IAAJ,CAAU,CACR;AACA,MAAOA,KAAP,CACD,CACF,CAAC,MAAOG,KAAP,CAAc,CACdC,OAAO,CAACD,KAAR,CAAc,gCAAd,CAAgDA,KAAhD,EACD,CACF,CAnBD,CAqBA,GAAME,QAAO,CAAG,QAAVA,QAAU,CAACL,IAAD,CAAqB,CACnC,GAAI,CAACH,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,CACF,GAAMC,QAAO,CAAGG,IAAI,CAACK,SAAL,CAAeN,IAAf,CAAhB,CACAH,YAAY,CAACU,OAAb,CAAqBZ,sBAArB,CAA6CG,OAA7C,EACD,CAAC,MAAOK,KAAP,CAAc,CACdC,OAAO,CAACD,KAAR,CAAc,+BAAd,CAA+CA,KAA/C,EACD,CACF,CAXD,CAaA,GAAMK,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,GAAI,CAACX,YAAL,CAAmB,CACjB,OACD,CAED,GAAI,CACFA,YAAY,CAACY,UAAb,CAAwBd,sBAAxB,EACD,CAAC,MAAOQ,KAAP,CAAc,CACdC,OAAO,CAACD,KAAR,CAAc,iCAAd,CAAiDA,KAAjD,EACD,CACF,CAVD,CAYA,MAAO,SAASO,WAAT,CAAoBC,KAApB,CAAgC,CACrCA,KAAK,CAACC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAAgC,kBAAhC,CACAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,SAACC,MAAD,CAAoD,CAClD,GAAMlB,KAAI,CAAGJ,OAAO,EAApB,CACA,GAAII,IAAI,EAAIA,IAAI,CAACmB,YAAjB,CAA+B,CAC7BD,MAAM,CAACL,OAAP,CAAeO,aAAf,kBAAyCpB,IAAI,CAACmB,YAA9C,EACD,CAED,MAAOD,OAAP,CACD,CARH,CASE,SAACG,GAAD,QAAcC,QAAO,CAACC,MAAR,CAAeF,GAAf,CAAd,EATF,EAWD,CAED,OAASzB,OAAT,CAAkBS,OAAlB,CAA2BG,UAA3B,CAAuCb,sBAAvC"},"metadata":{},"sourceType":"module"}