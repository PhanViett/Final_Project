{"ast":null,"code":"const AUTH_LOCAL_STORAGE_KEY = \"auth-data\";\n\nconst getAuth = () => {\n  if (!localStorage) {\n    return;\n  }\n\n  const lsValue = localStorage.getItem(AUTH_LOCAL_STORAGE_KEY);\n\n  if (!lsValue) {\n    return;\n  }\n\n  try {\n    const auth = JSON.parse(lsValue);\n\n    if (auth) {\n      // You can easily check auth_token expiration also\n      return auth;\n    }\n  } catch (error) {\n    console.error(\"AUTH LOCAL STORAGE PARSE ERROR\", error);\n  }\n};\n\nconst setAuth = auth => {\n  if (!localStorage) {\n    return;\n  }\n\n  try {\n    const lsValue = JSON.stringify(auth);\n    localStorage.setItem(AUTH_LOCAL_STORAGE_KEY, lsValue);\n  } catch (error) {\n    console.error(\"AUTH LOCAL STORAGE SAVE ERROR\", error);\n  }\n};\n\nconst removeAuth = () => {\n  if (!localStorage) {\n    return;\n  }\n\n  try {\n    localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY);\n  } catch (error) {\n    console.error(\"AUTH LOCAL STORAGE REMOVE ERROR\", error);\n  }\n};\n\nexport function setupAxios(axios) {\n  axios.defaults.headers.Accept = \"application/json\";\n  axios.interceptors.request.use(config => {\n    const auth = getAuth();\n\n    if (auth && auth.access_token) {\n      config.headers.Authorization = `Bearer ${auth.access_token}`;\n    }\n\n    return config;\n  }, err => Promise.reject(err));\n}\nexport { getAuth, setAuth, removeAuth, AUTH_LOCAL_STORAGE_KEY };","map":{"version":3,"names":["AUTH_LOCAL_STORAGE_KEY","getAuth","localStorage","lsValue","getItem","auth","JSON","parse","error","console","setAuth","stringify","setItem","removeAuth","removeItem","setupAxios","axios","defaults","headers","Accept","interceptors","request","use","config","access_token","Authorization","err","Promise","reject"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/app/modules/apps/auth/core/AuthHelpers.ts"],"sourcesContent":["import { AuthModel } from \"./_models\";\r\n\r\nconst AUTH_LOCAL_STORAGE_KEY = \"auth-data\";\r\nconst getAuth = (): AuthModel | undefined => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  const lsValue: string | null = localStorage.getItem(AUTH_LOCAL_STORAGE_KEY);\r\n  if (!lsValue) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const auth: AuthModel = JSON.parse(lsValue) as AuthModel;\r\n    if (auth) {\r\n      // You can easily check auth_token expiration also\r\n      return auth;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE PARSE ERROR\", error);\r\n  }\r\n};\r\n\r\nconst setAuth = (auth: AuthModel) => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const lsValue = JSON.stringify(auth);\r\n    localStorage.setItem(AUTH_LOCAL_STORAGE_KEY, lsValue);\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE SAVE ERROR\", error);\r\n  }\r\n};\r\n\r\nconst removeAuth = () => {\r\n  if (!localStorage) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    localStorage.removeItem(AUTH_LOCAL_STORAGE_KEY);\r\n  } catch (error) {\r\n    console.error(\"AUTH LOCAL STORAGE REMOVE ERROR\", error);\r\n  }\r\n};\r\n\r\nexport function setupAxios(axios: any) {\r\n  axios.defaults.headers.Accept = \"application/json\";\r\n  axios.interceptors.request.use(\r\n    (config: { headers: { Authorization: string } }) => {\r\n      const auth = getAuth();\r\n      if (auth && auth.access_token) {\r\n        config.headers.Authorization = `Bearer ${auth.access_token}`;\r\n      }\r\n\r\n      return config;\r\n    },\r\n    (err: any) => Promise.reject(err)\r\n  );\r\n}\r\n\r\nexport { getAuth, setAuth, removeAuth, AUTH_LOCAL_STORAGE_KEY };\r\n"],"mappings":"AAEA,MAAMA,sBAAsB,GAAG,WAA/B;;AACA,MAAMC,OAAO,GAAG,MAA6B;EAC3C,IAAI,CAACC,YAAL,EAAmB;IACjB;EACD;;EAED,MAAMC,OAAsB,GAAGD,YAAY,CAACE,OAAb,CAAqBJ,sBAArB,CAA/B;;EACA,IAAI,CAACG,OAAL,EAAc;IACZ;EACD;;EAED,IAAI;IACF,MAAME,IAAe,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAxB;;IACA,IAAIE,IAAJ,EAAU;MACR;MACA,OAAOA,IAAP;IACD;EACF,CAND,CAME,OAAOG,KAAP,EAAc;IACdC,OAAO,CAACD,KAAR,CAAc,gCAAd,EAAgDA,KAAhD;EACD;AACF,CAnBD;;AAqBA,MAAME,OAAO,GAAIL,IAAD,IAAqB;EACnC,IAAI,CAACH,YAAL,EAAmB;IACjB;EACD;;EAED,IAAI;IACF,MAAMC,OAAO,GAAGG,IAAI,CAACK,SAAL,CAAeN,IAAf,CAAhB;IACAH,YAAY,CAACU,OAAb,CAAqBZ,sBAArB,EAA6CG,OAA7C;EACD,CAHD,CAGE,OAAOK,KAAP,EAAc;IACdC,OAAO,CAACD,KAAR,CAAc,+BAAd,EAA+CA,KAA/C;EACD;AACF,CAXD;;AAaA,MAAMK,UAAU,GAAG,MAAM;EACvB,IAAI,CAACX,YAAL,EAAmB;IACjB;EACD;;EAED,IAAI;IACFA,YAAY,CAACY,UAAb,CAAwBd,sBAAxB;EACD,CAFD,CAEE,OAAOQ,KAAP,EAAc;IACdC,OAAO,CAACD,KAAR,CAAc,iCAAd,EAAiDA,KAAjD;EACD;AACF,CAVD;;AAYA,OAAO,SAASO,UAAT,CAAoBC,KAApB,EAAgC;EACrCA,KAAK,CAACC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC,kBAAhC;EACAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACGC,MAAD,IAAoD;IAClD,MAAMlB,IAAI,GAAGJ,OAAO,EAApB;;IACA,IAAII,IAAI,IAAIA,IAAI,CAACmB,YAAjB,EAA+B;MAC7BD,MAAM,CAACL,OAAP,CAAeO,aAAf,GAAgC,UAASpB,IAAI,CAACmB,YAAa,EAA3D;IACD;;IAED,OAAOD,MAAP;EACD,CARH,EASGG,GAAD,IAAcC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAThB;AAWD;AAED,SAASzB,OAAT,EAAkBS,OAAlB,EAA2BG,UAA3B,EAAuCb,sBAAvC"},"metadata":{},"sourceType":"module"}