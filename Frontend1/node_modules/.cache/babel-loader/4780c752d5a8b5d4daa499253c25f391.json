{"ast":null,"code":"export default function SetupAxios(axios, store) {\n  axios.defaults.headers.Accept = \"application/json\";\n  axios.interceptors.request.use(config => {\n    const {\n      auth: {\n        access_token\n      }\n    } = store.getState();\n\n    if (access_token) {\n      config.headers.Authorization = `Bearer ${access_token}`;\n    }\n\n    return config;\n  }, err => Promise.reject(err));\n  axios.interceptors.response.use(response => response, error => {\n    // if (error.response.status == 401) {\n    //   localStorage.clear();\n    //   window.location.href = \"/connexion\";\n    // }\n    // reject with error if response status is not 403\n    return Promise.reject(error);\n  });\n}\n_c = SetupAxios;\n\nconst responseHandler = response => {\n  return response;\n}; // const errorHandler = (error) => {\n//   console.log(\"error\", error.response);\n//   let { status } = error.response;\n//   switch (status) {\n//     case 400:\n//       const temp = errorCode?.find(\n//         (elem) => elem.key === error.response.data.errorCode\n//       );\n//       if (temp) {\n//         toast.error(temp.value, {\n//           position: \"top-right\",\n//           autoClose: 3000,\n//           hideProgressBar: false,\n//           closeOnClick: true,\n//           pauseOnHover: true,\n//           draggable: true,\n//           progress: undefined,\n//           toastId: \"error\",\n//         });\n//       }\n//       return Promise.reject(error);\n//     case 401:\n//       localStorage.removeItem(\"persist:root\");\n//       authHelper.removeAuth();\n//       toast.error(\"Token hết hạn!\", {\n//         position: \"top-right\",\n//         autoClose: 3000,\n//         hideProgressBar: false,\n//         closeOnClick: true,\n//         pauseOnHover: true,\n//         draggable: true,\n//         progress: undefined,\n//         toastId: \"error\",\n//       });\n//       window.location.reload();\n//       // navigate(0);\n//       return Promise.reject(error);\n//     case 500:\n//       localStorage.removeItem(\"persist:root\");\n//       authHelper.removeAuth();\n//       toast.error(\"Token hết hạn!\", {\n//         position: \"top-right\",\n//         autoClose: 3000,\n//         hideProgressBar: false,\n//         closeOnClick: true,\n//         pauseOnHover: true,\n//         draggable: true,\n//         progress: undefined,\n//         toastId: \"error\",\n//       });\n//       window.location.reload();\n//       // navigate(0);\n//       return Promise.reject(error);\n//     default:\n//       return Promise.reject(error);\n//   }\n// };\n\n\nvar _c;\n\n$RefreshReg$(_c, \"SetupAxios\");","map":{"version":3,"names":["SetupAxios","axios","store","defaults","headers","Accept","interceptors","request","use","config","auth","access_token","getState","Authorization","err","Promise","reject","response","error","responseHandler"],"sources":["D:/FHDC/CCHND-V2/src/app/configs/SetupAxios.js"],"sourcesContent":["export default function SetupAxios(axios, store) {\r\n  axios.defaults.headers.Accept = \"application/json\";\r\n  axios.interceptors.request.use(\r\n    (config) => {\r\n      const {\r\n        auth: { access_token },\r\n      } = store.getState();\r\n      if (access_token) {\r\n        config.headers.Authorization = `Bearer ${access_token}`;\r\n      }\r\n      return config;\r\n    },\r\n    (err) => Promise.reject(err)\r\n  );\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n      // if (error.response.status == 401) {\r\n      //   localStorage.clear();\r\n      //   window.location.href = \"/connexion\";\r\n      // }\r\n      // reject with error if response status is not 403\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n}\r\n\r\nconst responseHandler = (response) => {\r\n  return response;\r\n};\r\n\r\n// const errorHandler = (error) => {\r\n//   console.log(\"error\", error.response);\r\n//   let { status } = error.response;\r\n//   switch (status) {\r\n//     case 400:\r\n//       const temp = errorCode?.find(\r\n//         (elem) => elem.key === error.response.data.errorCode\r\n//       );\r\n//       if (temp) {\r\n//         toast.error(temp.value, {\r\n//           position: \"top-right\",\r\n//           autoClose: 3000,\r\n//           hideProgressBar: false,\r\n//           closeOnClick: true,\r\n//           pauseOnHover: true,\r\n//           draggable: true,\r\n//           progress: undefined,\r\n//           toastId: \"error\",\r\n//         });\r\n//       }\r\n//       return Promise.reject(error);\r\n//     case 401:\r\n//       localStorage.removeItem(\"persist:root\");\r\n//       authHelper.removeAuth();\r\n//       toast.error(\"Token hết hạn!\", {\r\n//         position: \"top-right\",\r\n//         autoClose: 3000,\r\n//         hideProgressBar: false,\r\n//         closeOnClick: true,\r\n//         pauseOnHover: true,\r\n//         draggable: true,\r\n//         progress: undefined,\r\n//         toastId: \"error\",\r\n//       });\r\n//       window.location.reload();\r\n//       // navigate(0);\r\n//       return Promise.reject(error);\r\n//     case 500:\r\n//       localStorage.removeItem(\"persist:root\");\r\n//       authHelper.removeAuth();\r\n//       toast.error(\"Token hết hạn!\", {\r\n//         position: \"top-right\",\r\n//         autoClose: 3000,\r\n//         hideProgressBar: false,\r\n//         closeOnClick: true,\r\n//         pauseOnHover: true,\r\n//         draggable: true,\r\n//         progress: undefined,\r\n//         toastId: \"error\",\r\n//       });\r\n//       window.location.reload();\r\n//       // navigate(0);\r\n//       return Promise.reject(error);\r\n//     default:\r\n//       return Promise.reject(error);\r\n//   }\r\n// };\r\n"],"mappings":"AAAA,eAAe,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,KAA3B,EAAkC;EAC/CD,KAAK,CAACE,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC,kBAAhC;EACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACGC,MAAD,IAAY;IACV,MAAM;MACJC,IAAI,EAAE;QAAEC;MAAF;IADF,IAEFT,KAAK,CAACU,QAAN,EAFJ;;IAGA,IAAID,YAAJ,EAAkB;MAChBF,MAAM,CAACL,OAAP,CAAeS,aAAf,GAAgC,UAASF,YAAa,EAAtD;IACD;;IACD,OAAOF,MAAP;EACD,CATH,EAUGK,GAAD,IAASC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAVX;EAYAb,KAAK,CAACK,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CACGS,QAAD,IAAcA,QADhB,EAEGC,KAAD,IAAW;IACT;IACA;IACA;IACA;IACA;IACA,OAAOH,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP;EACD,CATH;AAWD;KAzBuBlB,U;;AA2BxB,MAAMmB,eAAe,GAAIF,QAAD,IAAc;EACpC,OAAOA,QAAP;AACD,CAFD,C,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}