{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport qs from \"qs\";\nimport { createContext, useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\n\nfunction createResponseContext(initialState) {\n  return /*#__PURE__*/createContext(initialState);\n}\n\nfunction isNotEmpty(obj) {\n  return obj !== undefined && obj !== null && obj !== \"\";\n} // Example: page=1&items_per_page=10&sort=id&order=desc&search=a&filter_name=a&filter_online=false\n\n\nfunction stringifyRequestQuery(state) {\n  const pagination = qs.stringify(state, {\n    filter: [\"page\", \"items_per_page\"],\n    skipNulls: true\n  });\n  const sort = qs.stringify(state, {\n    filter: [\"sort\", \"order\"],\n    skipNulls: true\n  });\n  const search = isNotEmpty(state.search) ? qs.stringify(state, {\n    filter: [\"search\"],\n    skipNulls: true\n  }) : \"\";\n  const filter = state.filter ? Object.entries(state.filter).filter(obj => isNotEmpty(obj[1])).map(obj => {\n    return `filter_${obj[0]}=${obj[1]}`;\n  }).join(\"&\") : \"\";\n  return [pagination, sort, search, filter].filter(f => f).join(\"&\").toLowerCase();\n}\n\nfunction parseRequestQuery(query) {\n  const cache = qs.parse(query);\n  return cache;\n}\n\nfunction calculatedGroupingIsDisabled(isLoading, data) {\n  if (isLoading) {\n    return true;\n  }\n\n  return !data || !data.length;\n}\n\nfunction calculateIsAllDataSelected(data, selected) {\n  if (!data) {\n    return false;\n  }\n\n  return data.length > 0 && data.length === selected.length;\n}\n\nfunction groupingOnSelect(id, selected, setSelected) {\n  if (!id) {\n    return;\n  }\n\n  if (selected.includes(id)) {\n    setSelected(selected.filter(itemId => itemId !== id));\n  } else {\n    const updatedSelected = [...selected];\n    updatedSelected.push(id);\n    setSelected(updatedSelected);\n  }\n}\n\nfunction groupingOnSelectAll(isAllSelected, setSelected, data) {\n  if (isAllSelected) {\n    setSelected([]);\n    return;\n  }\n\n  if (!data || !data.length) {\n    return;\n  }\n\n  setSelected(data.filter(item => item.id).map(item => item.id));\n} // Hook\n\n\nfunction useDebounce(value, delay) {\n  _s();\n\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay); // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\n\nfunction compareDate(value, content) {\n  if (new Date(value).getTime() > new Date().getTime()) {\n    toast.error(content, {\n      position: \"top-right\",\n      autoClose: 2000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      toastId: \"error\"\n    });\n  }\n}\n\nexport { createResponseContext, stringifyRequestQuery, parseRequestQuery, calculatedGroupingIsDisabled, calculateIsAllDataSelected, groupingOnSelect, groupingOnSelectAll, useDebounce, isNotEmpty };","map":{"version":3,"names":["qs","createContext","useEffect","useState","toast","createResponseContext","initialState","isNotEmpty","obj","undefined","stringifyRequestQuery","state","pagination","stringify","filter","skipNulls","sort","search","Object","entries","map","join","f","toLowerCase","parseRequestQuery","query","cache","parse","calculatedGroupingIsDisabled","isLoading","data","length","calculateIsAllDataSelected","selected","groupingOnSelect","id","setSelected","includes","itemId","updatedSelected","push","groupingOnSelectAll","isAllSelected","item","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","compareDate","content","Date","getTime","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","toastId"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/_metronic/helpers/crud-helper/helpers.tsx"],"sourcesContent":["import qs from \"qs\";\r\nimport {\r\n    createContext,\r\n    Dispatch,\r\n    SetStateAction,\r\n    useEffect,\r\n    useState,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { ID, QueryResponseContextProps, QueryState } from \"./models\";\r\n\r\nfunction createResponseContext<T>(initialState: QueryResponseContextProps<T>) {\r\n    return createContext(initialState);\r\n}\r\n\r\nfunction isNotEmpty(obj: unknown) {\r\n    return obj !== undefined && obj !== null && obj !== \"\";\r\n}\r\n\r\n// Example: page=1&items_per_page=10&sort=id&order=desc&search=a&filter_name=a&filter_online=false\r\nfunction stringifyRequestQuery(state: QueryState): string {\r\n    const pagination = qs.stringify(state, {\r\n        filter: [\"page\", \"items_per_page\"],\r\n        skipNulls: true,\r\n    });\r\n    const sort = qs.stringify(state, {\r\n        filter: [\"sort\", \"order\"],\r\n        skipNulls: true,\r\n    });\r\n    const search = isNotEmpty(state.search)\r\n        ? qs.stringify(state, { filter: [\"search\"], skipNulls: true })\r\n        : \"\";\r\n\r\n    const filter = state.filter\r\n        ? Object.entries(state.filter as Object)\r\n              .filter((obj) => isNotEmpty(obj[1]))\r\n              .map((obj) => {\r\n                  return `filter_${obj[0]}=${obj[1]}`;\r\n              })\r\n              .join(\"&\")\r\n        : \"\";\r\n\r\n    return [pagination, sort, search, filter]\r\n        .filter((f) => f)\r\n        .join(\"&\")\r\n        .toLowerCase();\r\n}\r\n\r\nfunction parseRequestQuery(query: string): QueryState {\r\n    const cache: unknown = qs.parse(query);\r\n    return cache as QueryState;\r\n}\r\n\r\nfunction calculatedGroupingIsDisabled<T>(\r\n    isLoading: boolean,\r\n    data: Array<T> | undefined\r\n): boolean {\r\n    if (isLoading) {\r\n        return true;\r\n    }\r\n\r\n    return !data || !data.length;\r\n}\r\n\r\nfunction calculateIsAllDataSelected<T>(\r\n    data: Array<T> | undefined,\r\n    selected: Array<ID>\r\n): boolean {\r\n    if (!data) {\r\n        return false;\r\n    }\r\n\r\n    return data.length > 0 && data.length === selected.length;\r\n}\r\n\r\nfunction groupingOnSelect(\r\n    id: ID,\r\n    selected: Array<ID>,\r\n    setSelected: Dispatch<SetStateAction<Array<ID>>>\r\n) {\r\n    if (!id) {\r\n        return;\r\n    }\r\n\r\n    if (selected.includes(id)) {\r\n        setSelected(selected.filter((itemId) => itemId !== id));\r\n    } else {\r\n        const updatedSelected = [...selected];\r\n        updatedSelected.push(id);\r\n        setSelected(updatedSelected);\r\n    }\r\n}\r\n\r\nfunction groupingOnSelectAll<T>(\r\n    isAllSelected: boolean,\r\n    setSelected: Dispatch<SetStateAction<Array<ID>>>,\r\n    data?: Array<T & { id?: ID }>\r\n) {\r\n    if (isAllSelected) {\r\n        setSelected([]);\r\n        return;\r\n    }\r\n\r\n    if (!data || !data.length) {\r\n        return;\r\n    }\r\n\r\n    setSelected(data.filter((item) => item.id).map((item) => item.id));\r\n}\r\n\r\n// Hook\r\nfunction useDebounce(value: string | undefined, delay: number) {\r\n    // State and setters for debounced value\r\n    const [debouncedValue, setDebouncedValue] = useState(value);\r\n    useEffect(\r\n        () => {\r\n            // Update debounced value after delay\r\n            const handler = setTimeout(() => {\r\n                setDebouncedValue(value);\r\n            }, delay);\r\n            // Cancel the timeout if value changes (also on delay change or unmount)\r\n            // This is how we prevent debounced value from updating if value is changed ...\r\n            // .. within the delay period. Timeout gets cleared and restarted.\r\n            return () => {\r\n                clearTimeout(handler);\r\n            };\r\n        },\r\n        [value, delay] // Only re-call effect if value or delay changes\r\n    );\r\n    return debouncedValue;\r\n}\r\n\r\nfunction compareDate(value: any, content: string) {\r\n    if (new Date(value).getTime() > new Date().getTime()) {\r\n        toast.error(content, {\r\n            position: \"top-right\",\r\n            autoClose: 2000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            toastId: \"error\",\r\n        });\r\n    }\r\n}\r\n\r\nexport {\r\n    createResponseContext,\r\n    stringifyRequestQuery,\r\n    parseRequestQuery,\r\n    calculatedGroupingIsDisabled,\r\n    calculateIsAllDataSelected,\r\n    groupingOnSelect,\r\n    groupingOnSelectAll,\r\n    useDebounce,\r\n    isNotEmpty,\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}