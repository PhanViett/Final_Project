{"ast":null,"code":"import _createClass from\"D:/FHDC/CCHND-V2/Frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"D:/FHDC/CCHND-V2/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import{createPopper}from'@popperjs/core';import{getElementChild,getElementParents,getAttributeValueByBreakpoint,getUniqueIdWithPrefix,DataUtil,ElementStyleUtil,EventHandlerUtil,insertAfterElement,slideUp,slideDown,DOMEventHandlerUtil,throttle,getHighestZindex}from'../_utils/index';var defaultMenuOptions={dropdown:{hoverTimeout:200,zindex:105},accordion:{slideSpeed:250,expand:false}};var MenuComponent=/*#__PURE__*/_createClass(function MenuComponent(_element2,options){var _this=this;_classCallCheck(this,MenuComponent);this.element=void 0;this.options=void 0;this.instanceUid=void 0;this.triggerElement=null;this._setTriggerElement=function(){var target=document.querySelector(\"[data-kt-menu-target=\\\"#\".concat(_this.element.getAttribute('id'),\"\\\"\"));if(target){_this.triggerElement=target;}else if(_this.element.closest('[data-kt-menu-trigger]')){_this.triggerElement=_this.element.closest('[data-kt-menu-trigger]');}else if(_this.element.parentNode&&getElementChild(_this.element.parentNode,'[data-kt-menu-trigger]')){var child=getElementChild(_this.element.parentNode,'[data-kt-menu-trigger]');if(child){_this.triggerElement=child;}}if(_this.triggerElement){DataUtil.set(_this.triggerElement,'menu',_this);}};this._isTriggerElement=function(item){return _this.triggerElement===item;};this._getItemOption=function(item,name){var value=null;if(item&&item.hasAttribute('data-kt-menu-'+name)){var attr=item.getAttribute('data-kt-menu-'+name)||'';value=getAttributeValueByBreakpoint(attr);if(value!==null&&String(value)==='true'){value=true;}else if(value!==null&&String(value)==='false'){value=false;}}return value;};this._getItemElement=function(_element){// Element is the external trigger element\nif(_this._isTriggerElement(_element)){return _element;}// Element has item toggler attribute\nif(_element.hasAttribute('data-kt-menu-trigger')){return _element;}// Element has item DOM reference in it's data storage\nvar itemElement=DataUtil.get(_element,'item');if(itemElement){return itemElement;}// Item is parent of element\nvar item=_element.closest('.menu-item[data-kt-menu-trigger]');if(item){return item;}// Element's parent has item DOM reference in it's data storage\nvar sub=_element.closest('.menu-sub');if(sub){var subItem=DataUtil.get(sub,'item');if(subItem){return subItem;}}};this._getItemParentElement=function(item){var sub=item.closest('.menu-sub');if(!sub){return null;}var subItem=DataUtil.get(sub,'item');if(subItem){return subItem;}var parentItem=sub.closest('.menu-item[data-kt-menu-trigger]');if(sub&&parentItem){return parentItem;}return null;};this._getItemParentElements=function(item){var parents=[];var parent;var i=0;var buffer=item;do{parent=_this._getItemParentElement(buffer);if(parent){parents.push(parent);buffer=parent;}i++;}while(parent!==null&&i<20);if(_this.triggerElement){parents.unshift(_this.triggerElement);}return parents;};this._getDropdownPopperConfig=function(item){// Placement\nvar placementOption=_this._getItemOption(item,'placement');var placement='right';if(placementOption){placement=placementOption;}// Flip\n// const flipValue = this._getItemOption(item, 'flip')\n// const flip = flipValue ? flipValue.toString().split(',') : []\n// Offset\nvar offsetValue=_this._getItemOption(item,'offset');var offset=offsetValue?offsetValue.toString().split(','):[];// Strategy\nvar strategy=_this._getItemOption(item,'overflow')===true?'absolute':'fixed';return{placement:placement,strategy:strategy,modifiers:[{name:'offset',options:{offset:offset}},{name:'preventOverflow'},{name:'flip',options:{// altBoundary: true,\n// fallbackPlacements: flip,\nflipVariations:false}}]};};this._getItemChildElement=function(item){var selector=item;var subItem=DataUtil.get(item,'sub');if(subItem){selector=subItem;}if(selector){//element = selector.querySelector('.show.menu-item[data-kt-menu-trigger]');\nvar element=selector.querySelector('.menu-item[data-kt-menu-trigger]');if(element){return element;}}return null;};this._getItemChildElements=function(item){var children=[];var child;var i=0;var buffer=item;do{child=_this._getItemChildElement(buffer);if(child){children.push(child);buffer=child;}i++;}while(child!==null&&i<20);return children;};this._getItemSubElement=function(item){if(!item){return null;}if(_this._isTriggerElement(item)){return _this.element;}if(item.classList.contains('menu-sub')){return item;}else if(DataUtil.has(item,'sub')){return DataUtil.get(item,'sub');}else{return getElementChild(item,'.menu-sub');}};this._getCss=function(el,styleProp){var defaultView=(el.ownerDocument||document).defaultView;if(!defaultView){return'';}// sanitize property name to css notation\n// (hyphen separated words eg. font-Size)\nstyleProp=styleProp.replace(/([A-Z])/g,'-$1').toLowerCase();return defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);};this._getItemSubType=function(element){var sub=_this._getItemSubElement(element);if(sub&&parseInt(_this._getCss(sub,'z-index'))>0){return'dropdown';}else{return'accordion';}};this._isItemSubShown=function(item){var sub=_this._getItemSubElement(item);if(sub){if(_this._getItemSubType(item)==='dropdown'){return sub.classList.contains('show')&&sub.hasAttribute('data-popper-placement');}else{return item.classList.contains('show');}}return false;};this._isItemDropdownPermanent=function(item){return _this._getItemOption(item,'permanent')===true;};this._isItemParentShown=function(item){return getElementParents(item,'.menu-item.show').length>0;};this._isItemSubElement=function(item){return item.classList.contains('menu-sub');};this._hasItemSub=function(item){return item.classList.contains('menu-item')&&item.hasAttribute('data-kt-menu-trigger');};this._getItemLinkElement=function(item){return getElementChild(item,'.menu-link');};this._getItemToggleElement=function(item){if(_this.triggerElement){return _this.triggerElement;}return _this._getItemLinkElement(item);};this._showDropdown=function(item){if(EventHandlerUtil.trigger(_this.element,'kt.menu.dropdown.show')===false){return;}// Hide all currently shown dropdowns except current one\nMenuComponent.hideDropdowns(item);// const toggle = this._isTriggerElement(item) ? item : this._getItemLinkElement(item);\nvar sub=_this._getItemSubElement(item);var width=_this._getItemOption(item,'width');var height=_this._getItemOption(item,'height');var zindex=_this.options.dropdown.zindex;var parentZindex=getHighestZindex(item);// update\n// Apply a new z-index if dropdown's toggle element or it's parent has greater z-index // update\nif(parentZindex!==null&&parentZindex>=zindex){zindex=parentZindex+1;}if(zindex){ElementStyleUtil.set(sub,'z-index',zindex);}if(width){ElementStyleUtil.set(sub,'width',width);}if(height){ElementStyleUtil.set(sub,'height',height);}_this.initDropdownPopper(item,sub);item.classList.add('show');item.classList.add('menu-dropdown');sub.classList.add('show');// Append the sub the the root of the menu\nif(_this._getItemOption(item,'overflow')===true){document.body.appendChild(sub);DataUtil.set(item,'sub',sub);DataUtil.set(sub,'item',item);DataUtil.set(sub,'menu',_this);}else{DataUtil.set(sub,'item',item);}EventHandlerUtil.trigger(_this.element,'kt.menu.dropdown.shown');};this.initDropdownPopper=function(item,sub){// Setup popper instance\nvar reference;var attach=_this._getItemOption(item,'attach');if(attach){if(attach==='parent'){reference=item.parentNode;}else{reference=document.querySelector(attach);}}else{reference=item;}if(reference){var popper=createPopper(reference,sub,_this._getDropdownPopperConfig(item));DataUtil.set(item,'popper',popper);}};this._hideDropdown=function(item){if(EventHandlerUtil.trigger(_this.element,'kt.menu.dropdown.hide')===false){return;}var sub=_this._getItemSubElement(item);ElementStyleUtil.set(sub,'z-index','');ElementStyleUtil.set(sub,'width','');ElementStyleUtil.set(sub,'height','');item.classList.remove('show');item.classList.remove('menu-dropdown');sub.classList.remove('show');// Append the sub back to it's parent\nif(_this._getItemOption(item,'overflow')===true){if(item.classList.contains('menu-item')){item.appendChild(sub);}else{insertAfterElement(_this.element,item);}DataUtil.remove(item,'sub');DataUtil.remove(sub,'item');DataUtil.remove(sub,'menu');}if(DataUtil.has(item,'popper')===true){DataUtil.get(item,'popper').destroy();DataUtil.remove(item,'popper');}// Destroy popper(new)\n_this.destroyDropdownPopper(item);EventHandlerUtil.trigger(_this.element,'kt.menu.dropdown.hidden');};this.destroyDropdownPopper=function(item){if(DataUtil.has(item,'popper')===true){DataUtil.get(item,'popper').destroy();DataUtil.remove(item,'popper');}EventHandlerUtil.trigger(_this.element,'kt.menu.dropdown.hidden');};this._showAccordion=function(item){if(EventHandlerUtil.trigger(_this.element,'kt.menu.accordion.show')===false){return;}if(_this.options.accordion.expand===false){_this._hideAccordions(item);}if(DataUtil.has(item,'popper')===true){_this._hideDropdown(item);}item.classList.add('hover');// updateWW\nitem.classList.add('showing');var subElement=_this._getItemSubElement(item);if(subElement){var sub=subElement;slideDown(sub,_this.options.accordion.slideSpeed,function(){item.classList.remove('showing');item.classList.add('show');sub.classList.add('show');EventHandlerUtil.trigger(_this.element,'kt.menu.accordion.shown');});}};this._hideAccordion=function(item){if(EventHandlerUtil.trigger(_this.element,'kt.menu.accordion.hide')===false){return;}var sub=_this._getItemSubElement(item);item.classList.add('hiding');if(sub){slideUp(sub,_this.options.accordion.slideSpeed,function(){item.classList.remove('hiding');item.classList.remove('show');sub.classList.remove('show');item.classList.remove('hover');// update\nEventHandlerUtil.trigger(_this.element,'kt.menu.accordion.hidden');});}};this._hideAccordions=function(item){var itemsToHide=_this.element.querySelectorAll('.show[data-kt-menu-trigger]');if(itemsToHide&&itemsToHide.length>0){for(var i=0,len=itemsToHide.length;i<len;i++){var itemToHide=itemsToHide[i];if(_this._getItemSubType(itemToHide)==='accordion'&&itemToHide!==item&&item.contains(itemToHide)===false&&itemToHide.contains(item)===false){_this._hideAccordion(itemToHide);}}}};this._reset=function(item){if(_this._hasItemSub(item)===false){return;}var sub=_this._getItemSubElement(item);// Reset sub state if sub type is changed during the window resize\nif(DataUtil.has(item,'type')&&DataUtil.get(item,'type')!==_this._getItemSubType(item)){// updated\nitem.classList.remove('hover');item.classList.remove('show');item.classList.remove('show');if(sub&&sub.removeClass){sub.removeClass(sub,'show');}}// updated\n};this._destroy=function(){};this._update=function(){var items=_this.element.querySelectorAll('.menu-item[data-kt-menu-trigger]');items.forEach(function(el){return _this._reset(el);});};this._hide=function(item){if(!item){return;}if(_this._isItemSubShown(item)===false){return;}if(_this._getItemSubType(item)==='dropdown'){_this._hideDropdown(item);}else if(_this._getItemSubType(item)==='accordion'){_this._hideAccordion(item);}};this._show=function(item){if(!item){return;}if(_this._isItemSubShown(item)===true){return;}if(_this._getItemSubType(item)==='dropdown'){_this._showDropdown(item);// // show current dropdown\n}else if(_this._getItemSubType(item)==='accordion'){_this._showAccordion(item);}// Remember last submenu type\nDataUtil.set(item,'type',_this._getItemSubType(item));// updated\n};this._toggle=function(item){if(!item){return;}if(_this._isItemSubShown(item)===true){_this._hide(item);}else{_this._show(item);}};this._mouseout=function(element,e){var item=_this._getItemElement(element);if(!item){return;}if(_this._getItemOption(item,'trigger')!=='hover'){return;}var timeout=setTimeout(function(){if(DataUtil.get(item,'hover')==='1'){_this._hide(item);}},_this.options.dropdown.hoverTimeout);DataUtil.set(item,'hover','1');DataUtil.set(item,'timeout',timeout);};this._mouseover=function(element,e){var item=_this._getItemElement(element);if(!item){return;}if(_this._getItemOption(item,'trigger')!=='hover'){return;}if(DataUtil.get(item,'hover')==='1'){clearTimeout(DataUtil.get(item,'timeout'));DataUtil.remove(item,'hover');DataUtil.remove(item,'timeout');}_this._show(item);};this._dismiss=function(element,e){var item=_this._getItemElement(element);var items=_this._getItemChildElements(item);//if ( item !== null && _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\nvar itemSubType=_this._getItemSubType(item);if(item!==null&&itemSubType==='dropdown'){_this._hide(item);// hide items dropdown\n// Hide all child elements as well\nif(items.length>0){for(var i=0,len=items.length;i<len;i++){//if ( _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\nif(items[i]!==null&&_this._getItemSubType(items[i])==='dropdown'){_this._hide(items[i]);}}}}};this._link=function(element,e){if(EventHandlerUtil.trigger(_this.element,'kt.menu.link.click')===false){return;}// Dismiss all shown dropdowns\nMenuComponent.hideDropdowns(undefined);EventHandlerUtil.trigger(_this.element,'kt.menu.link.clicked');};this._click=function(element,e){e.preventDefault();var item=_this._getItemElement(element);if(_this._getItemOption(item,'trigger')!=='click'){return;}if(_this._getItemOption(item,'toggle')===false){_this._show(item);}else{_this._toggle(item);}};this.click=function(element,e){return _this._click(element,e);};this.link=function(element,e){return _this._link(element,e);};this.dismiss=function(element,e){return _this._dismiss(element,e);};this.mouseover=function(element,e){return _this._mouseover(element,e);};this.mouseout=function(element,e){return _this._mouseout(element,e);};this.getItemTriggerType=function(item){return _this._getItemOption(item,'trigger');};this.getItemSubType=function(element){return _this._getItemSubType(element);};this.show=function(item){return _this._show(item);};this.hide=function(item){return _this._hide(item);};this.reset=function(item){return _this._reset(item);};this.update=function(){return _this._update();};this.getElement=function(){return _this.element;};this.getItemLinkElement=function(item){return _this._getItemLinkElement(item);};this.getItemToggleElement=function(item){return _this._getItemToggleElement(item);};this.getItemSubElement=function(item){return _this._getItemSubElement(item);};this.getItemParentElements=function(item){return _this._getItemParentElements(item);};this.isItemSubShown=function(item){return _this._isItemSubShown(item);};this.isItemParentShown=function(item){return _this._isItemParentShown(item);};this.getTriggerElement=function(){return _this.triggerElement;};this.isItemDropdownPermanent=function(item){return _this._isItemDropdownPermanent(item);};this.hideAccordions=function(item){return _this._hideAccordions(item);};this.on=function(name,handler){return EventHandlerUtil.on(_this.element,name,handler);};this.one=function(name,handler){return EventHandlerUtil.one(_this.element,name,handler);};this.off=function(name){return EventHandlerUtil.off(_this.element,name);};this.element=_element2;this.options=Object.assign(defaultMenuOptions,options);this.instanceUid=getUniqueIdWithPrefix('menu');// this.element.setAttribute('data-kt-menu', 'true')\nthis._setTriggerElement();this._update();DataUtil.set(this.element,'menu',this);return this;}// Set external trigger element\n);MenuComponent.getInstance=function(element){// Element has menu DOM reference in it's DATA storage\nvar elementMenu=DataUtil.get(element,'menu');if(elementMenu){return elementMenu;}// Element has .menu parent\nvar menu=element.closest('.menu');if(menu){var menuData=DataUtil.get(menu,'menu');if(menuData){return menuData;}}// Element has a parent with DOM reference to .menu in it's DATA storage\nif(element.classList.contains('menu-link')){var sub=element.closest('.menu-sub');if(sub){var subMenu=DataUtil.get(sub,'menu');if(subMenu){return subMenu;}}}return null;};MenuComponent.hideDropdowns=function(skip){var items=document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]');if(items&&items.length>0){for(var i=0,len=items.length;i<len;i++){var item=items[i];var menu=MenuComponent.getInstance(item);if(menu&&menu.getItemSubType(item)==='dropdown'){if(skip){if(menu.getItemSubElement(item).contains(skip)===false&&item.contains(skip)===false&&item!==skip){menu.hide(item);}}else{menu.hide(item);}}}}};MenuComponent.updateDropdowns=function(){var items=document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]');if(items&&items.length>0){for(var i=0,len=items.length;i<len;i++){var item=items[i];if(DataUtil.has(item,'popper')){DataUtil.get(item,'popper').forceUpdate();}}}};MenuComponent.createInstances=function(selector){// Initialize menus\ndocument.querySelectorAll(selector).forEach(function(el){var menuItem=el;var menuInstance=MenuComponent.getInstance(menuItem);if(!menuInstance){menuInstance=new MenuComponent(el,defaultMenuOptions);}});};MenuComponent.initGlobalHandlers=function(){// Dropdown handler\ndocument.addEventListener('click',function(e){var menuItems=document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]');if(menuItems&&menuItems.length>0){for(var i=0;i<menuItems.length;i++){var item=menuItems[i];var menuObj=MenuComponent.getInstance(item);if(menuObj&&menuObj.getItemSubType(item)==='dropdown'){// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar menu=menuObj.getElement();var sub=menuObj.getItemSubElement(item);if(item===e.target||item.contains(e.target)){continue;}if(sub&&(sub===e.target||sub.contains(e.target))){continue;}menuObj.hide(item);}}}});// Sub toggle handler\nDOMEventHandlerUtil.on(document.body,'.menu-item[data-kt-menu-trigger] > .menu-link, [data-kt-menu-trigger]:not(.menu-item):not([data-kt-menu-trigger=\"auto\"])','click',function(e){var menu=MenuComponent.getInstance(this);if(menu){return menu.click(this,e);}});// // Link handler\nDOMEventHandlerUtil.on(document.body,'.menu-item:not([data-kt-menu-trigger]) > .menu-link','click',function(e){e.stopPropagation();var menu=MenuComponent.getInstance(this);if(menu&&menu.link){return menu.link(this,e);}});// Dismiss handler\nDOMEventHandlerUtil.on(document.body,'[data-kt-menu-dismiss=\"true\"]','click',function(e){var menu=MenuComponent.getInstance(this);if(menu){return menu.dismiss(this,e);}});// Mouseover handler\nDOMEventHandlerUtil.on(document.body,'[data-kt-menu-trigger], .menu-sub','mouseover',function(e){var menu=MenuComponent.getInstance(this);if(menu&&menu.getItemSubType(this)==='dropdown'){return menu.mouseover(this,e);}});// Mouseout handler\nDOMEventHandlerUtil.on(document.body,'[data-kt-menu-trigger], .menu-sub','mouseout',function(e){var menu=MenuComponent.getInstance(this);if(menu&&menu.getItemSubType(this)==='dropdown'){return menu.mouseout(this,e);}});// Resize handler\nwindow.addEventListener('resize',function(){var timer;throttle(timer,function(){// Locate and update Drawer instances on window resize\nvar elements=document.querySelectorAll('[data-kt-menu=\"true\"]');elements.forEach(function(el){var menu=MenuComponent.getInstance(el);if(menu){menu.update();}});},200);});};MenuComponent.bootstrap=function(){MenuComponent.initGlobalHandlers();MenuComponent.createInstances('[data-kt-menu=\"true\"]');};MenuComponent.reinitialization=function(){MenuComponent.createInstances('[data-kt-menu=\"true\"]');};MenuComponent.createInsance=function(selector){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultMenuOptions;var element=document.body.querySelector(selector);if(!element){return;}var item=element;var menu=MenuComponent.getInstance(item);if(!menu){menu=new MenuComponent(item,options);}return menu;};export{MenuComponent,defaultMenuOptions};","map":{"version":3,"names":["createPopper","getElementChild","getElementParents","getAttributeValueByBreakpoint","getUniqueIdWithPrefix","DataUtil","ElementStyleUtil","EventHandlerUtil","insertAfterElement","slideUp","slideDown","DOMEventHandlerUtil","throttle","getHighestZindex","defaultMenuOptions","dropdown","hoverTimeout","zindex","accordion","slideSpeed","expand","MenuComponent","_element","options","element","instanceUid","triggerElement","_setTriggerElement","target","document","querySelector","getAttribute","closest","parentNode","child","set","_isTriggerElement","item","_getItemOption","name","value","hasAttribute","attr","String","_getItemElement","itemElement","get","sub","subItem","_getItemParentElement","parentItem","_getItemParentElements","parents","parent","i","buffer","push","unshift","_getDropdownPopperConfig","placementOption","placement","offsetValue","offset","toString","split","strategy","modifiers","flipVariations","_getItemChildElement","selector","_getItemChildElements","children","_getItemSubElement","classList","contains","has","_getCss","el","styleProp","defaultView","ownerDocument","replace","toLowerCase","getComputedStyle","getPropertyValue","_getItemSubType","parseInt","_isItemSubShown","_isItemDropdownPermanent","_isItemParentShown","length","_isItemSubElement","_hasItemSub","_getItemLinkElement","_getItemToggleElement","_showDropdown","trigger","hideDropdowns","width","height","parentZindex","initDropdownPopper","add","body","appendChild","reference","attach","popper","_hideDropdown","remove","destroy","destroyDropdownPopper","_showAccordion","_hideAccordions","subElement","_hideAccordion","itemsToHide","querySelectorAll","len","itemToHide","_reset","removeClass","_destroy","_update","items","forEach","_hide","_show","_toggle","_mouseout","e","timeout","setTimeout","_mouseover","clearTimeout","_dismiss","itemSubType","_link","undefined","_click","preventDefault","click","link","dismiss","mouseover","mouseout","getItemTriggerType","getItemSubType","show","hide","reset","update","getElement","getItemLinkElement","getItemToggleElement","getItemSubElement","getItemParentElements","isItemSubShown","isItemParentShown","getTriggerElement","isItemDropdownPermanent","hideAccordions","on","handler","one","off","Object","assign","getInstance","elementMenu","menu","menuData","subMenu","skip","updateDropdowns","forceUpdate","createInstances","menuItem","menuInstance","initGlobalHandlers","addEventListener","menuItems","menuObj","stopPropagation","window","timer","elements","bootstrap","reinitialization","createInsance"],"sources":["D:/FHDC/CCHND-V2/Frontend/src/_metronic/assets/ts/components/MenuComponent.ts"],"sourcesContent":["import {createPopper, VirtualElement} from '@popperjs/core'\r\nimport {\r\n  getElementChild,\r\n  getElementParents,\r\n  getAttributeValueByBreakpoint,\r\n  getUniqueIdWithPrefix,\r\n  DataUtil,\r\n  ElementStyleUtil,\r\n  EventHandlerUtil,\r\n  insertAfterElement,\r\n  slideUp,\r\n  slideDown,\r\n  DOMEventHandlerUtil,\r\n  throttle,\r\n  getHighestZindex,\r\n} from '../_utils/index'\r\n\r\nexport interface MenuOptions {\r\n  dropdown: {\r\n    hoverTimeout: number\r\n    zindex: number\r\n  }\r\n  accordion: {\r\n    slideSpeed: number\r\n    expand: boolean\r\n  }\r\n}\r\n\r\nconst defaultMenuOptions: MenuOptions = {\r\n  dropdown: {\r\n    hoverTimeout: 200,\r\n    zindex: 105,\r\n  },\r\n  accordion: {\r\n    slideSpeed: 250,\r\n    expand: false,\r\n  },\r\n}\r\n\r\ntype PopperPlacement =\r\n  | 'right'\r\n  | 'auto'\r\n  | 'auto-start'\r\n  | 'auto-end'\r\n  | 'top'\r\n  | 'bottom'\r\n  | 'left'\r\n  | 'top-start'\r\n  | 'top-end'\r\n  | 'bottom-start'\r\n  | 'bottom-end'\r\n  | 'right-start'\r\n  | 'right-end'\r\n  | 'left-start'\r\n  | 'left-end'\r\n  | undefined\r\n\r\nclass MenuComponent {\r\n  element: HTMLElement\r\n  options: MenuOptions\r\n  instanceUid: string\r\n  triggerElement: HTMLElement | null = null\r\n\r\n  constructor(_element: HTMLElement, options: MenuOptions) {\r\n    this.element = _element\r\n    this.options = Object.assign(defaultMenuOptions, options)\r\n    this.instanceUid = getUniqueIdWithPrefix('menu')\r\n    // this.element.setAttribute('data-kt-menu', 'true')\r\n    this._setTriggerElement()\r\n    this._update()\r\n    DataUtil.set(this.element, 'menu', this)\r\n    return this\r\n  }\r\n\r\n  // Set external trigger element\r\n  private _setTriggerElement = () => {\r\n    const target = document.querySelector(\r\n      `[data-kt-menu-target=\"#${this.element.getAttribute('id')}\"`\r\n    )\r\n\r\n    if (target) {\r\n      this.triggerElement = target as HTMLElement\r\n    } else if (this.element.closest('[data-kt-menu-trigger]')) {\r\n      this.triggerElement = this.element.closest('[data-kt-menu-trigger]') as HTMLElement\r\n    } else if (\r\n      this.element.parentNode &&\r\n      getElementChild(this.element.parentNode as HTMLElement, '[data-kt-menu-trigger]')\r\n    ) {\r\n      const child = getElementChild(\r\n        this.element.parentNode as HTMLElement,\r\n        '[data-kt-menu-trigger]'\r\n      )\r\n      if (child) {\r\n        this.triggerElement = child\r\n      }\r\n    }\r\n\r\n    if (this.triggerElement) {\r\n      DataUtil.set(this.triggerElement, 'menu', this)\r\n    }\r\n  }\r\n\r\n  // Test if menu has external trigger element\r\n  private _isTriggerElement = (item: HTMLElement) => {\r\n    return this.triggerElement === item\r\n  }\r\n\r\n  // Get item option(through html attributes)\r\n  private _getItemOption = (item: HTMLElement, name: string) => {\r\n    let value: string | JSON | null | boolean = null\r\n    if (item && item.hasAttribute('data-kt-menu-' + name)) {\r\n      const attr = item.getAttribute('data-kt-menu-' + name) || ''\r\n      value = getAttributeValueByBreakpoint(attr)\r\n      if (value !== null && String(value) === 'true') {\r\n        value = true\r\n      } else if (value !== null && String(value) === 'false') {\r\n        value = false\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  // Get item element\r\n  private _getItemElement = (_element: HTMLElement) => {\r\n    // Element is the external trigger element\r\n    if (this._isTriggerElement(_element)) {\r\n      return _element\r\n    }\r\n\r\n    // Element has item toggler attribute\r\n    if (_element.hasAttribute('data-kt-menu-trigger')) {\r\n      return _element\r\n    }\r\n\r\n    // Element has item DOM reference in it's data storage\r\n    const itemElement = DataUtil.get(_element, 'item')\r\n    if (itemElement) {\r\n      return itemElement\r\n    }\r\n\r\n    // Item is parent of element\r\n    const item = _element.closest('.menu-item[data-kt-menu-trigger]')\r\n    if (item) {\r\n      return item\r\n    }\r\n\r\n    // Element's parent has item DOM reference in it's data storage\r\n    const sub = _element.closest('.menu-sub')\r\n    if (sub) {\r\n      const subItem = DataUtil.get(sub as HTMLElement, 'item')\r\n      if (subItem) {\r\n        return subItem\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get item parent element\r\n  private _getItemParentElement = (item: HTMLElement) => {\r\n    const sub = item.closest('.menu-sub')\r\n    if (!sub) {\r\n      return null\r\n    }\r\n\r\n    const subItem = DataUtil.get(sub as HTMLElement, 'item')\r\n    if (subItem) {\r\n      return subItem\r\n    }\r\n\r\n    const parentItem = sub.closest('.menu-item[data-kt-menu-trigger]')\r\n    if (sub && parentItem) {\r\n      return parentItem\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // Get item parent elements\r\n  private _getItemParentElements = (item: HTMLElement) => {\r\n    const parents: Array<Element> = []\r\n    let parent: Element\r\n    let i = 0\r\n    let buffer: HTMLElement = item\r\n\r\n    do {\r\n      parent = this._getItemParentElement(buffer)\r\n      if (parent) {\r\n        parents.push(parent)\r\n        buffer = parent as HTMLElement\r\n      }\r\n\r\n      i++\r\n    } while (parent !== null && i < 20)\r\n\r\n    if (this.triggerElement) {\r\n      parents.unshift(this.triggerElement)\r\n    }\r\n\r\n    return parents\r\n  }\r\n\r\n  // Prepare popper config for dropdown(see: https://popper.js.org/docs/v2/)\r\n  private _getDropdownPopperConfig = (item: HTMLElement) => {\r\n    // Placement\r\n    const placementOption = this._getItemOption(item, 'placement')\r\n    let placement: PopperPlacement = 'right'\r\n    if (placementOption) {\r\n      placement = placementOption as PopperPlacement\r\n    }\r\n\r\n    // Flip\r\n    // const flipValue = this._getItemOption(item, 'flip')\r\n    // const flip = flipValue ? flipValue.toString().split(',') : []\r\n\r\n    // Offset\r\n    const offsetValue = this._getItemOption(item, 'offset')\r\n    const offset = offsetValue ? offsetValue.toString().split(',') : []\r\n\r\n    // Strategy\r\n    const strategy: 'absolute' | 'fixed' | undefined =\r\n      this._getItemOption(item, 'overflow') === true ? 'absolute' : 'fixed'\r\n\r\n    return {\r\n      placement: placement,\r\n      strategy: strategy,\r\n      modifiers: [\r\n        {\r\n          name: 'offset',\r\n          options: {\r\n            offset: offset,\r\n          },\r\n        },\r\n        {\r\n          name: 'preventOverflow',\r\n        },\r\n        {\r\n          name: 'flip',\r\n          options: {\r\n            // altBoundary: true,\r\n            // fallbackPlacements: flip,\r\n            flipVariations: false,\r\n          },\r\n        },\r\n      ],\r\n    }\r\n  }\r\n\r\n  // Get item child element\r\n  private _getItemChildElement = (item: HTMLElement) => {\r\n    let selector = item\r\n\r\n    const subItem = DataUtil.get(item, 'sub')\r\n    if (subItem) {\r\n      selector = subItem\r\n    }\r\n\r\n    if (selector) {\r\n      //element = selector.querySelector('.show.menu-item[data-kt-menu-trigger]');\r\n      const element = selector.querySelector('.menu-item[data-kt-menu-trigger]')\r\n      if (element) {\r\n        return element\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  // Get item child elements\r\n  private _getItemChildElements = (item: HTMLElement) => {\r\n    const children: Array<Element> = []\r\n    let child: Element | null\r\n    let i = 0\r\n    let buffer = item\r\n    do {\r\n      child = this._getItemChildElement(buffer)\r\n      if (child) {\r\n        children.push(child)\r\n        buffer = child as HTMLElement\r\n      }\r\n\r\n      i++\r\n    } while (child !== null && i < 20)\r\n\r\n    return children\r\n  }\r\n\r\n  // Get item sub element\r\n  private _getItemSubElement = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return null\r\n    }\r\n\r\n    if (this._isTriggerElement(item)) {\r\n      return this.element\r\n    }\r\n\r\n    if (item.classList.contains('menu-sub')) {\r\n      return item\r\n    } else if (DataUtil.has(item, 'sub')) {\r\n      return DataUtil.get(item, 'sub')\r\n    } else {\r\n      return getElementChild(item, '.menu-sub')\r\n    }\r\n  }\r\n\r\n  private _getCss = (el: HTMLElement, styleProp: string) => {\r\n    const defaultView = (el.ownerDocument || document).defaultView\r\n    if (!defaultView) {\r\n      return ''\r\n    }\r\n\r\n    // sanitize property name to css notation\r\n    // (hyphen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\r\n    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp)\r\n  }\r\n\r\n  // Get item sub type\r\n  private _getItemSubType = (element: HTMLElement) => {\r\n    const sub = this._getItemSubElement(element)\r\n    if (sub && parseInt(this._getCss(sub, 'z-index')) > 0) {\r\n      return 'dropdown'\r\n    } else {\r\n      return 'accordion'\r\n    }\r\n  }\r\n\r\n  // Test if item's sub is shown\r\n  private _isItemSubShown = (item: HTMLElement) => {\r\n    let sub = this._getItemSubElement(item)\r\n    if (sub) {\r\n      if (this._getItemSubType(item) === 'dropdown') {\r\n        return sub.classList.contains('show') && sub.hasAttribute('data-popper-placement')\r\n      } else {\r\n        return item.classList.contains('show')\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  // Test if item dropdown is permanent\r\n  private _isItemDropdownPermanent = (item: HTMLElement) => {\r\n    return this._getItemOption(item, 'permanent') === true\r\n  }\r\n\r\n  // Test if item's parent is shown\r\n  private _isItemParentShown = (item: HTMLElement) => {\r\n    return getElementParents(item, '.menu-item.show').length > 0\r\n  }\r\n\r\n  // Test of it is item sub element\r\n  private _isItemSubElement = (item: HTMLElement) => {\r\n    return item.classList.contains('menu-sub')\r\n  }\r\n\r\n  // Test if item has sub\r\n  private _hasItemSub = (item: HTMLElement) => {\r\n    return item.classList.contains('menu-item') && item.hasAttribute('data-kt-menu-trigger')\r\n  }\r\n\r\n  // Get link element\r\n  private _getItemLinkElement = (item: HTMLElement) => {\r\n    return getElementChild(item, '.menu-link')\r\n  }\r\n\r\n  // Get toggle element\r\n  private _getItemToggleElement = (item: HTMLElement) => {\r\n    if (this.triggerElement) {\r\n      return this.triggerElement\r\n    }\r\n\r\n    return this._getItemLinkElement(item)\r\n  }\r\n\r\n  // Show item dropdown\r\n  private _showDropdown = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.show') === false) {\r\n      return\r\n    }\r\n\r\n    // Hide all currently shown dropdowns except current one\r\n    MenuComponent.hideDropdowns(item)\r\n\r\n    // const toggle = this._isTriggerElement(item) ? item : this._getItemLinkElement(item);\r\n    const sub = this._getItemSubElement(item)\r\n    const width = this._getItemOption(item, 'width')\r\n    const height = this._getItemOption(item, 'height')\r\n\r\n    let zindex = this.options.dropdown.zindex\r\n    const parentZindex = getHighestZindex(item) // update\r\n    // Apply a new z-index if dropdown's toggle element or it's parent has greater z-index // update\r\n    if (parentZindex !== null && parentZindex >= zindex) {\r\n      zindex = parentZindex + 1\r\n    }\r\n\r\n    if (zindex) {\r\n      ElementStyleUtil.set(sub, 'z-index', zindex)\r\n    }\r\n\r\n    if (width) {\r\n      ElementStyleUtil.set(sub, 'width', width)\r\n    }\r\n\r\n    if (height) {\r\n      ElementStyleUtil.set(sub, 'height', height)\r\n    }\r\n\r\n    this.initDropdownPopper(item, sub)\r\n\r\n    item.classList.add('show')\r\n    item.classList.add('menu-dropdown')\r\n    sub.classList.add('show')\r\n\r\n    // Append the sub the the root of the menu\r\n    if (this._getItemOption(item, 'overflow') === true) {\r\n      document.body.appendChild(sub)\r\n      DataUtil.set(item, 'sub', sub)\r\n      DataUtil.set(sub, 'item', item)\r\n      DataUtil.set(sub, 'menu', this)\r\n    } else {\r\n      DataUtil.set(sub, 'item', item)\r\n    }\r\n\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.shown')\r\n  }\r\n\r\n  // Init dropdown popper(new)\r\n  private initDropdownPopper = (item: HTMLElement, sub: HTMLElement) => {\r\n    // Setup popper instance\r\n    let reference\r\n    const attach = this._getItemOption(item, 'attach') as string\r\n\r\n    if (attach) {\r\n      if (attach === 'parent') {\r\n        reference = item.parentNode\r\n      } else {\r\n        reference = document.querySelector(attach)\r\n      }\r\n    } else {\r\n      reference = item\r\n    }\r\n\r\n    if (reference) {\r\n      const popper = createPopper(\r\n        reference as Element | VirtualElement,\r\n        sub,\r\n        this._getDropdownPopperConfig(item)\r\n      )\r\n      DataUtil.set(item, 'popper', popper)\r\n    }\r\n  }\r\n\r\n  // Hide item dropdown\r\n  private _hideDropdown = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hide') === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n    ElementStyleUtil.set(sub, 'z-index', '')\r\n    ElementStyleUtil.set(sub, 'width', '')\r\n    ElementStyleUtil.set(sub, 'height', '')\r\n    item.classList.remove('show')\r\n    item.classList.remove('menu-dropdown')\r\n    sub.classList.remove('show')\r\n\r\n    // Append the sub back to it's parent\r\n    if (this._getItemOption(item, 'overflow') === true) {\r\n      if (item.classList.contains('menu-item')) {\r\n        item.appendChild(sub)\r\n      } else {\r\n        insertAfterElement(this.element, item)\r\n      }\r\n\r\n      DataUtil.remove(item, 'sub')\r\n      DataUtil.remove(sub, 'item')\r\n      DataUtil.remove(sub, 'menu')\r\n    }\r\n\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      DataUtil.get(item, 'popper').destroy()\r\n      DataUtil.remove(item, 'popper')\r\n    }\r\n\r\n    // Destroy popper(new)\r\n    this.destroyDropdownPopper(item)\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hidden')\r\n  }\r\n\r\n  // Destroy dropdown popper(new)\r\n  private destroyDropdownPopper = (item: HTMLElement) => {\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      DataUtil.get(item, 'popper').destroy()\r\n      DataUtil.remove(item, 'popper')\r\n    }\r\n\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hidden')\r\n  }\r\n\r\n  private _showAccordion = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.show') === false) {\r\n      return\r\n    }\r\n\r\n    if (this.options.accordion.expand === false) {\r\n      this._hideAccordions(item)\r\n    }\r\n\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      this._hideDropdown(item)\r\n    }\r\n\r\n    item.classList.add('hover') // updateWW\r\n    item.classList.add('showing')\r\n\r\n    const subElement = this._getItemSubElement(item)\r\n    if (subElement) {\r\n      const sub = subElement as HTMLElement\r\n      slideDown(sub, this.options.accordion.slideSpeed, () => {\r\n        item.classList.remove('showing')\r\n        item.classList.add('show')\r\n        sub.classList.add('show')\r\n        EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.shown')\r\n      })\r\n    }\r\n  }\r\n\r\n  private _hideAccordion = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.hide') === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n    item.classList.add('hiding')\r\n\r\n    if (sub) {\r\n      slideUp(sub, this.options.accordion.slideSpeed, () => {\r\n        item.classList.remove('hiding')\r\n        item.classList.remove('show')\r\n        sub.classList.remove('show')\r\n        item.classList.remove('hover') // update\r\n        EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.hidden')\r\n      })\r\n    }\r\n  }\r\n\r\n  // Hide all shown accordions of item\r\n  private _hideAccordions = (item: HTMLElement) => {\r\n    const itemsToHide = this.element.querySelectorAll('.show[data-kt-menu-trigger]')\r\n    if (itemsToHide && itemsToHide.length > 0) {\r\n      for (var i = 0, len = itemsToHide.length; i < len; i++) {\r\n        const itemToHide = itemsToHide[i] as HTMLElement\r\n\r\n        if (\r\n          this._getItemSubType(itemToHide) === 'accordion' &&\r\n          itemToHide !== item &&\r\n          item.contains(itemToHide) === false &&\r\n          itemToHide.contains(item) === false\r\n        ) {\r\n          this._hideAccordion(itemToHide)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Event Handlers\r\n  // Reset item state classes if item sub type changed\r\n  private _reset = (item: HTMLElement) => {\r\n    if (this._hasItemSub(item) === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n\r\n    // Reset sub state if sub type is changed during the window resize\r\n    if (DataUtil.has(item, 'type') && DataUtil.get(item, 'type') !== this._getItemSubType(item)) {\r\n      // updated\r\n      item.classList.remove('hover')\r\n      item.classList.remove('show')\r\n      item.classList.remove('show')\r\n      if (sub && sub.removeClass) {\r\n        sub.removeClass(sub, 'show')\r\n      }\r\n    } // updated\r\n  }\r\n\r\n  // TODO: not done\r\n  private _destroy = () => {}\r\n\r\n  // Update all item state classes if item sub type changed\r\n  private _update = () => {\r\n    const items = this.element.querySelectorAll('.menu-item[data-kt-menu-trigger]')\r\n    items.forEach((el) => this._reset(el as HTMLElement))\r\n  }\r\n\r\n  // Hide item sub\r\n  private _hide = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === false) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemSubType(item) === 'dropdown') {\r\n      this._hideDropdown(item)\r\n    } else if (this._getItemSubType(item) === 'accordion') {\r\n      this._hideAccordion(item)\r\n    }\r\n  }\r\n\r\n  // Show item sub\r\n  private _show = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === true) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemSubType(item) === 'dropdown') {\r\n      this._showDropdown(item) // // show current dropdown\r\n    } else if (this._getItemSubType(item) === 'accordion') {\r\n      this._showAccordion(item)\r\n    }\r\n\r\n    // Remember last submenu type\r\n\r\n    DataUtil.set(item, 'type', this._getItemSubType(item)) // updated\r\n  }\r\n\r\n  // Toggle item sub\r\n  private _toggle = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === true) {\r\n      this._hide(item)\r\n    } else {\r\n      this._show(item)\r\n    }\r\n  }\r\n\r\n  // Mouseout handle\r\n  private _mouseout = (element: HTMLElement, e: MouseEvent) => {\r\n    const item = this._getItemElement(element)\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'trigger') !== 'hover') {\r\n      return\r\n    }\r\n\r\n    const timeout = setTimeout(() => {\r\n      if (DataUtil.get(item, 'hover') === '1') {\r\n        this._hide(item)\r\n      }\r\n    }, this.options.dropdown.hoverTimeout)\r\n\r\n    DataUtil.set(item, 'hover', '1')\r\n    DataUtil.set(item, 'timeout', timeout)\r\n  }\r\n\r\n  // Mouseover handle\r\n  private _mouseover = (element: HTMLElement, e: MouseEvent) => {\r\n    const item = this._getItemElement(element)\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'trigger') !== 'hover') {\r\n      return\r\n    }\r\n\r\n    if (DataUtil.get(item, 'hover') === '1') {\r\n      clearTimeout(DataUtil.get(item, 'timeout'))\r\n      DataUtil.remove(item, 'hover')\r\n      DataUtil.remove(item, 'timeout')\r\n    }\r\n\r\n    this._show(item)\r\n  }\r\n\r\n  // Dismiss handler\r\n  private _dismiss = (element: HTMLElement, e: Event) => {\r\n    const item = this._getItemElement(element)\r\n    const items = this._getItemChildElements(item)\r\n    //if ( item !== null && _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\r\n    const itemSubType = this._getItemSubType(item)\r\n    if (item !== null && itemSubType === 'dropdown') {\r\n      this._hide(item) // hide items dropdown\r\n\r\n      // Hide all child elements as well\r\n      if (items.length > 0) {\r\n        for (let i = 0, len = items.length; i < len; i++) {\r\n          //if ( _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\r\n          if (items[i] !== null && this._getItemSubType(items[i] as HTMLElement) === 'dropdown') {\r\n            this._hide(items[i] as HTMLElement)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Link handler\r\n  private _link = (element: HTMLElement, e: Event) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.link.click') === false) {\r\n      return\r\n    }\r\n\r\n    // Dismiss all shown dropdowns\r\n    MenuComponent.hideDropdowns(undefined)\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.link.clicked')\r\n  }\r\n\r\n  private _click = (element: HTMLElement, e: Event) => {\r\n    e.preventDefault()\r\n    const item = this._getItemElement(element)\r\n    if (this._getItemOption(item, 'trigger') !== 'click') {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'toggle') === false) {\r\n      this._show(item)\r\n    } else {\r\n      this._toggle(item)\r\n    }\r\n  }\r\n\r\n  ///////////////////////\r\n  // ** Public API  ** //\r\n  ///////////////////////\r\n  public click = (element: HTMLElement, e: Event) => {\r\n    return this._click(element, e)\r\n  }\r\n\r\n  public link = (element: HTMLElement, e: Event) => {\r\n    return this._link(element, e)\r\n  }\r\n\r\n  public dismiss = (element: HTMLElement, e: Event) => {\r\n    return this._dismiss(element, e)\r\n  }\r\n\r\n  public mouseover = (element: HTMLElement, e: Event) => {\r\n    return this._mouseover(element, e as MouseEvent)\r\n  }\r\n\r\n  public mouseout = (element: HTMLElement, e: Event) => {\r\n    return this._mouseout(element, e as MouseEvent)\r\n  }\r\n\r\n  // General Methods\r\n  public getItemTriggerType = (item: HTMLElement) => {\r\n    return this._getItemOption(item, 'trigger')\r\n  }\r\n\r\n  public getItemSubType = (element: HTMLElement) => {\r\n    return this._getItemSubType(element)\r\n  }\r\n\r\n  public show = (item: HTMLElement) => {\r\n    return this._show(item)\r\n  }\r\n\r\n  public hide = (item: HTMLElement) => {\r\n    return this._hide(item)\r\n  }\r\n\r\n  public reset = (item: HTMLElement) => {\r\n    return this._reset(item)\r\n  }\r\n\r\n  public update = () => {\r\n    return this._update()\r\n  }\r\n\r\n  public getElement = () => {\r\n    return this.element\r\n  }\r\n\r\n  public getItemLinkElement = (item: HTMLElement) => {\r\n    return this._getItemLinkElement(item)\r\n  }\r\n\r\n  public getItemToggleElement = (item: HTMLElement) => {\r\n    return this._getItemToggleElement(item)\r\n  }\r\n\r\n  public getItemSubElement = (item: HTMLElement) => {\r\n    return this._getItemSubElement(item)\r\n  }\r\n\r\n  public getItemParentElements = (item: HTMLElement) => {\r\n    return this._getItemParentElements(item)\r\n  }\r\n\r\n  public isItemSubShown = (item: HTMLElement) => {\r\n    return this._isItemSubShown(item)\r\n  }\r\n\r\n  public isItemParentShown = (item: HTMLElement) => {\r\n    return this._isItemParentShown(item)\r\n  }\r\n\r\n  public getTriggerElement = () => {\r\n    return this.triggerElement\r\n  }\r\n\r\n  public isItemDropdownPermanent = (item: HTMLElement) => {\r\n    return this._isItemDropdownPermanent(item)\r\n  }\r\n\r\n  // Accordion Mode Methods\r\n  public hideAccordions = (item: HTMLElement) => {\r\n    return this._hideAccordions(item)\r\n  }\r\n\r\n  // Event API\r\n  public on = (name: string, handler: any) => {\r\n    return EventHandlerUtil.on(this.element, name, handler)\r\n  }\r\n\r\n  public one = (name: string, handler: any) => {\r\n    return EventHandlerUtil.one(this.element, name, handler)\r\n  }\r\n\r\n  public off = (name: string) => {\r\n    return EventHandlerUtil.off(this.element, name)\r\n  }\r\n\r\n  // public static methods\r\n  // Get KTMenu instance by element\r\n  public static getInstance = (element: HTMLElement) => {\r\n    // Element has menu DOM reference in it's DATA storage\r\n    const elementMenu = DataUtil.get(element, 'menu')\r\n    if (elementMenu) {\r\n      return elementMenu\r\n    }\r\n\r\n    // Element has .menu parent\r\n    const menu = element.closest('.menu')\r\n    if (menu) {\r\n      const menuData = DataUtil.get(menu as HTMLElement, 'menu')\r\n      if (menuData) {\r\n        return menuData\r\n      }\r\n    }\r\n\r\n    // Element has a parent with DOM reference to .menu in it's DATA storage\r\n    if (element.classList.contains('menu-link')) {\r\n      const sub = element.closest('.menu-sub')\r\n      if (sub) {\r\n        const subMenu = DataUtil.get(sub as HTMLElement, 'menu')\r\n        if (subMenu) {\r\n          return subMenu\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // Hide all dropdowns and skip one if provided\r\n  public static hideDropdowns = (skip: HTMLElement | undefined) => {\r\n    const items = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n\r\n    if (items && items.length > 0) {\r\n      for (let i = 0, len = items.length; i < len; i++) {\r\n        const item = items[i]\r\n        const menu = MenuComponent.getInstance(item as HTMLElement)\r\n\r\n        if (menu && menu.getItemSubType(item) === 'dropdown') {\r\n          if (skip) {\r\n            if (\r\n              menu.getItemSubElement(item).contains(skip) === false &&\r\n              item.contains(skip) === false &&\r\n              item !== skip\r\n            ) {\r\n              menu.hide(item)\r\n            }\r\n          } else {\r\n            menu.hide(item)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static updateDropdowns = () => {\r\n    const items = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n    if (items && items.length > 0) {\r\n      for (var i = 0, len = items.length; i < len; i++) {\r\n        var item = items[i]\r\n\r\n        if (DataUtil.has(item as HTMLElement, 'popper')) {\r\n          DataUtil.get(item as HTMLElement, 'popper').forceUpdate()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Global handlers\r\n  public static createInstances = (selector: string) => {\r\n    // Initialize menus\r\n    document.querySelectorAll(selector).forEach((el) => {\r\n      const menuItem = el as HTMLElement\r\n      let menuInstance = MenuComponent.getInstance(menuItem)\r\n      if (!menuInstance) {\r\n        menuInstance = new MenuComponent(el as HTMLElement, defaultMenuOptions)\r\n      }\r\n    })\r\n  }\r\n\r\n  public static initGlobalHandlers = () => {\r\n    // Dropdown handler\r\n    document.addEventListener('click', (e) => {\r\n      const menuItems = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n      if (menuItems && menuItems.length > 0) {\r\n        for (let i = 0; i < menuItems.length; i++) {\r\n          const item = menuItems[i] as HTMLElement\r\n          const menuObj = MenuComponent.getInstance(item) as MenuComponent\r\n          if (menuObj && menuObj.getItemSubType(item) === 'dropdown') {\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            const menu = menuObj.getElement()\r\n            const sub = menuObj.getItemSubElement(item) as HTMLElement\r\n            if (item === e.target || item.contains(e.target as HTMLElement)) {\r\n              continue\r\n            }\r\n\r\n            if (sub && (sub === e.target || sub.contains(e.target as HTMLElement))) {\r\n              continue\r\n            }\r\n            menuObj.hide(item)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // Sub toggle handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '.menu-item[data-kt-menu-trigger] > .menu-link, [data-kt-menu-trigger]:not(.menu-item):not([data-kt-menu-trigger=\"auto\"])',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu) {\r\n          return menu.click(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // // Link handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '.menu-item:not([data-kt-menu-trigger]) > .menu-link',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        e.stopPropagation()\r\n        const menu = MenuComponent.getInstance(this)\r\n        if (menu && menu.link) {\r\n          return menu.link(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Dismiss handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-dismiss=\"true\"]',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu) {\r\n          return menu.dismiss(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Mouseover handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-trigger], .menu-sub',\r\n      'mouseover',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu && menu.getItemSubType(this) === 'dropdown') {\r\n          return menu.mouseover(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Mouseout handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-trigger], .menu-sub',\r\n      'mouseout',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu && menu.getItemSubType(this) === 'dropdown') {\r\n          return menu.mouseout(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Resize handler\r\n    window.addEventListener('resize', () => {\r\n      let timer\r\n      throttle(\r\n        timer,\r\n        () => {\r\n          // Locate and update Drawer instances on window resize\r\n          const elements = document.querySelectorAll('[data-kt-menu=\"true\"]')\r\n          elements.forEach((el) => {\r\n            const menu = MenuComponent.getInstance(el as HTMLElement)\r\n            if (menu) {\r\n              menu.update()\r\n            }\r\n          })\r\n        },\r\n        200\r\n      )\r\n    })\r\n  }\r\n\r\n  public static bootstrap = () => {\r\n    MenuComponent.initGlobalHandlers()\r\n    MenuComponent.createInstances('[data-kt-menu=\"true\"]')\r\n  }\r\n\r\n  public static reinitialization = () => {\r\n    MenuComponent.createInstances('[data-kt-menu=\"true\"]')\r\n  }\r\n\r\n  public static createInsance = (\r\n    selector: string,\r\n    options: MenuOptions = defaultMenuOptions\r\n  ): MenuComponent | undefined => {\r\n    const element = document.body.querySelector(selector)\r\n    if (!element) {\r\n      return\r\n    }\r\n    const item = element as HTMLElement\r\n    let menu = MenuComponent.getInstance(item)\r\n    if (!menu) {\r\n      menu = new MenuComponent(item, options)\r\n    }\r\n    return menu\r\n  }\r\n}\r\n\r\nexport {MenuComponent, defaultMenuOptions}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}